{"version":3,"sources":["components/Elements/SearchForm.js","securityUtils/setJWTToken.js","actions/userActions.js","actions/types.js","components/Elements/Header.js","actions/videoActions.js","components/Elements/Poster.js","components/Elements/VideoPreview.js","components/pages/MainPage.js","components/Elements/Video.js","components/Elements/VideoMenu/IframePopup.js","components/Elements/VideoMenu/Availability.js","components/Elements/VideoMenu/Edit.js","components/Elements/VideoActionsMenu.js","components/containers/VideoContainer.js","components/Elements/Recomendations.js","components/containers/NoVideoContainer.js","components/pages/VideoPage.js","components/pages/UserVideoPage.js","components/pages/LoginPage.js","reducers/errorReducer.js","reducers/videoReducer.js","reducers/userReducer.js","reducers/rootReducer.js","store.js","components/Elements/EmbedVideo.js","components/pages/Moderation.js","components/pages/PageNotFound.js","components/containers/UploadVideoContainer.js","components/pages/UploadVideoPage.js","components/pages/TestPage.js","roles.js","components/pages/EditVideoPage.js","App.js","serviceWorker.js","index.js"],"names":["SearchForm","props","className","onSubmit","searchingMethod","type","placeholder","name","setJWTToken","token","axios","defaults","headers","common","userLogout","dispatch","localStorage","removeItem","payload","pages","Header","state","searchEnabled","componentDidMount","path","window","location","pathname","forEach","page","setState","this","security","validToken","user","curPath","accessLevel","role","headerLinks","userIsAuthenticated","map","key","classnames","href","fullName","onClick","userNotAuthenticated","React","Component","connect","baseURL","getVideos","searchMask","availability","a","get","res","data","getVideo","videoId","response","getPosterSrc","posterId","Poster","width","posterContainer","clientWidth","api_url","ref","cont","style","height","src","alt","VideoPreview","videoUri","video","id","poster","available","title","author","createdAt","views","MainPage","searchingVideo","e","preventDefault","mask","target","elements","value","videos","Video","undefined","newProps","oldProps","console","log","createPlayer","posterSrc","streams","resolution","stream","mimeType","size","push","player","Plyr","document","getElementById","controls","settings","autoplay","autopause","clickToPlay","hideControls","fullscreen","enabled","source","sources","quality","default","preload","iframeText","Modal","show","animation","onHide","hide","Body","defaultValue","rows","fontSize","Availability","updateAvailability","setAvailability","post","Edit","redirectToEditPage","VideoActionsMenu","showIframePopup","hideIframePopup","menuItems","Dropdown","Item","videoAuthor","username","getMenuItems","Toggle","backgroundColor","Menu","menuItem","index","array","VideoContainer","description","Recomendations","errors","getRecommendations","message","recommendations","recommendation","NoVideoContainer","createRef","current","error","TestPage","match","params","errorMessage","UserVideoPage","getUserVideos","LoginPage","onChange","onLogin","creditials","password","userAuthentication","nextProps","setItem","decoded","jwt_decode","initialState","booleanActionPayload","combineReducers","action","middleware","thunk","store","navigator","userAgent","includes","createStore","rootReducer","compose","applyMiddleware","__REDUX_DEVTOOLS_EXTENSION__","EmbedVideo","Moderation","PageNotFound","UploadVideoContainer","submitForm","videoDetails","videoFile","posterFile","uploadVideoDetails","history","onSelectFile","files","encType","htmlFor","accept","formData","FormData","append","ROLES","ADMINISTRATOR","MODERATOR","CREATOR","EditVideoPage","editVideo","roles","titleIsEdited","descriptionIsEdited","jwtToken","currentType","Date","now","exp","App","exact","component","VideoPage","UploadVideoPage","from","to","Boolean","hostname","ReactDOM","render","StrictMode","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.2d681772.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst SearchForm = (props) => {\r\n  return (\r\n    <form className=\"form-inline my-2 my-lg-0\" onSubmit={props.searchingMethod}>\r\n      <input\r\n        className=\"form-control mr-sm-2\"\r\n        type=\"text\"\r\n        placeholder=\"Поиск\"\r\n        name=\"mask\"\r\n      />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default SearchForm;\r\n","import axios from \"axios\"\r\n\r\nconst setJWTToken = token => {\r\n    if (token) {\r\n        axios.defaults.headers.common[\"Authorization\"] = token\r\n    } else {\r\n        delete axios.defaults.headers.common[\"Authorization\"]\r\n    }\r\n}\r\n\r\nexport default setJWTToken;","import { GET_ERRORS, SET_CURRENT_USER } from \"./types\";\r\nimport axios from \"axios\";\r\nimport setJWTToken from \"../securityUtils/setJWTToken\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\n//axios.defaults.baseURL = \"http://p-lmplay-as01:8080/lmplay/api/\";\r\n\r\n//axios.defaults.baseURL = \"http://localhost:8080/lmplay/api\";\r\n\r\nexport const userAuthentication = (creditials) => async (dispatch) => {\r\n  try {\r\n    const params = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n    const data = {\r\n      username: creditials.username,\r\n      password: creditials.password,\r\n    };\r\n    const res = await axios.post(\"/user/login\", data, params);\r\n\r\n    const { token } = res.data;\r\n    localStorage.setItem(\"jwtToken\", token);\r\n\r\n    setJWTToken(token);\r\n\r\n    const decoded = jwt_decode(token);\r\n\r\n    dispatch({\r\n      type: SET_CURRENT_USER,\r\n      payload: decoded,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GET_ERRORS,\r\n      payload: err.response.data,\r\n    });\r\n  }\r\n};\r\n\r\nexport const userLogout = () => (dispatch) => {\r\n  localStorage.removeItem(\"jwtToken\");\r\n  setJWTToken(false);\r\n  dispatch({\r\n    type: SET_CURRENT_USER,\r\n    payload: {},\r\n  });\r\n};\r\n","export const GET_ERRORS = \"GET_ERRORS\";\r\nexport const GET_VIDEOS = \"GET_VIDEOS\";\r\nexport const GET_SELECTED_VIDEO = \"GET_SELECTED_VIDEO\";\r\nexport const SET_CURRENT_USER = \"SET_CURRENT_USER\";\r\nexport const GET_RECOMMENDATIONS = \"GET_RECOMMENDATIONS\";\r\n","import React from \"react\";\r\nimport SearchForm from \"./SearchForm\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { userLogout } from \"../../actions/userActions\";\r\nimport classnames from \"classnames\";\r\n\r\nconst pages = [\r\n  // title, uri, is public?, searchingField\r\n  [\"Главная\", \"/\", 0, true], // 0 - available to all users, 1 - for creater or highter, 2 - for moderators or highter, 3 - for admins\r\n  [\"Мои видео\", \"/user-videos\", 1, false],\r\n  [\"Загрузить\", \"/uploading\", 1, false],\r\n  [\"Модерация\", \"/moderation\", 2, true],\r\n];\r\n\r\nclass Header extends React.Component {\r\n  state = {\r\n    searchEnabled: false,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    const path = window.location.pathname;\r\n    pages.forEach((page) => {\r\n      if (page[1] === path && page[3])\r\n        this.setState({\r\n          searchEnabled: true,\r\n        });\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { validToken, user } = this.props.security;\r\n    const curPath = window.location.pathname;\r\n    var accessLevel = 0;\r\n\r\n    switch (user.role) {\r\n      case \"CREATOR\":\r\n        accessLevel = 1;\r\n        break;\r\n      case \"MODERATOR\":\r\n        accessLevel = 2;\r\n        break;\r\n      case \"ADMINISTRATOR\":\r\n        accessLevel = 3;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    const userIsAuthenticated = (\r\n      <div className=\"collapse navbar-collapse\">\r\n        <ul className=\"navbar-nav mr-auto\">\r\n          {pages.map(\r\n            (page) =>\r\n              page[2] <= accessLevel && (\r\n                <li key={page[0]} className=\"nav-item\">\r\n                  {\r\n                    <a\r\n                      className={classnames(\"nav-link\", {\r\n                        \"nav-link text-muted font-weight-lighter\":\r\n                          page[1] !== curPath,\r\n                      })}\r\n                      href={page[1]}\r\n                    >\r\n                      {page[0]}\r\n                    </a>\r\n                  }\r\n                </li>\r\n              )\r\n          )}\r\n        </ul>\r\n        {this.state.searchEnabled && (\r\n          <SearchForm searchingMethod={this.props.searchingMethod} />\r\n        )}\r\n        <div className=\"text-muted text-center ml-3 mr-3\">\r\n          <div className=\"small\">{user.fullName}</div>\r\n          <div className=\"small m-0 p-0\">{user.role}</div>\r\n        </div>\r\n        <div className=\"navbar-nav\">\r\n          <a\r\n            className=\"nav-link text-muted font-weight-lighter\"\r\n            href=\"/\"\r\n            onClick={() => this.props.userLogout()}\r\n          >\r\n            Выйти\r\n          </a>\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n    const userNotAuthenticated = (\r\n      <div className=\"collapse navbar-collapse\">\r\n        <ul className=\"navbar-nav mr-auto\">\r\n          {pages.map(\r\n            (page) =>\r\n              page[2] === 0 && (\r\n                <li key={page[0]} className=\"nav-item\">\r\n                  {\r\n                    <a\r\n                      className={classnames(\"nav-link\", {\r\n                        \"nav-link text-muted font-weight-lighter\":\r\n                          page[1] !== curPath,\r\n                      })}\r\n                      href={page[1]}\r\n                    >\r\n                      {page[0]}\r\n                    </a>\r\n                  }\r\n                </li>\r\n              )\r\n          )}\r\n        </ul>\r\n        {this.state.searchEnabled && (\r\n          <SearchForm searchingMethod={this.props.searchingMethod} />\r\n        )}\r\n        <div className=\"navbar-nav\">\r\n          <a\r\n            className={classnames(\"nav-link\", {\r\n              \"nav-link text-muted font-weight-lighter\": \"/login\" !== curPath,\r\n            })}\r\n            href=\"/login\"\r\n          >\r\n            Войти\r\n          </a>\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n    let headerLinks;\r\n\r\n    if (validToken && user) {\r\n      headerLinks = userIsAuthenticated;\r\n    } else {\r\n      headerLinks = userNotAuthenticated;\r\n    }\r\n\r\n    return (\r\n      <nav className=\"navbar navbar-expand navbar-light header-bg-color\">\r\n        <a className=\"navbar-brand\" href=\"/\">\r\n          LMPlay\r\n        </a>\r\n        {headerLinks}\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nHeader.propTypes = {\r\n  userLogout: PropTypes.func.isRequired,\r\n  security: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    security: state.security,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { userLogout })(Header);\r\n","import {\r\n  GET_ERRORS,\r\n  GET_VIDEOS,\r\n  GET_SELECTED_VIDEO,\r\n  GET_RECOMMENDATIONS,\r\n} from \"./types\";\r\nimport axios from \"axios\";\r\n\r\naxios.defaults.baseURL = \"http://p-lmplay-as01:8080/lmplay/api\";\r\n\r\n//axios.defaults.baseURL = \"http://localhost:8080/lmplay/api\";\r\n\r\nexport const uploadVideoDetails = (videoDetails, history) => async (\r\n  dispatch\r\n) => {\r\n  try {\r\n    const formData = new FormData();\r\n    formData.append(\"title\", videoDetails.title);\r\n    formData.append(\"description\", videoDetails.description);\r\n    formData.append(\"videoFile\", videoDetails.videoFile);\r\n    formData.append(\"posterFile\", videoDetails.posterFile);\r\n    const params = {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    };\r\n    await axios.post(\"/video/upload\", formData, params);\r\n    window.location.href = \"/user-videos\";\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GET_ERRORS,\r\n      payload: err.response.data,\r\n    });\r\n  }\r\n};\r\n\r\nexport const getVideos = (searchMask, availability) => async (dispatch) => {\r\n  const res = await axios.get(\r\n    `/video/videos?title=${searchMask}&available=${availability}`\r\n  );\r\n  dispatch({\r\n    type: GET_VIDEOS,\r\n    payload: res.data,\r\n  });\r\n};\r\n\r\nexport const getVideo = (videoId) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(`/video/${videoId}`);\r\n    if (res.data)\r\n      dispatch({\r\n        type: GET_SELECTED_VIDEO,\r\n        payload: res.data,\r\n      });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GET_ERRORS,\r\n      payload: err.response.data,\r\n    });\r\n  }\r\n};\r\n\r\nexport const getUserVideos = () => async (dispatch) => {\r\n  const res = await axios.get(\"/user/videos\");\r\n\r\n  dispatch({\r\n    type: GET_VIDEOS,\r\n    payload: res.data,\r\n  });\r\n};\r\n\r\nexport const setAvailability = (videoId, availability) => async (dispatch) => {\r\n  const res = await axios.post(\r\n    `/video/availability?id=${videoId}&available=${availability}`\r\n  );\r\n  dispatch({\r\n    type: GET_SELECTED_VIDEO,\r\n    payload: res.data,\r\n  });\r\n};\r\n\r\nexport const getPosterSrc = (posterId) => {\r\n  if (posterId) {\r\n    return axios.defaults.baseURL + `/poster/${posterId}`;\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const getVideoSrc = (resolution, name) => {\r\n  if (resolution && name) {\r\n    return axios.defaults.baseURL + `/video/stream/${resolution}/${name}`;\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const getRecommendations = (videoId) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(\r\n      axios.defaults.baseURL + `/video/recommendations/${videoId}`\r\n    );\r\n    if (res.data) {\r\n      dispatch({\r\n        type: GET_RECOMMENDATIONS,\r\n        payload: res.data,\r\n      });\r\n    }\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GET_ERRORS,\r\n      payload: err.response.data,\r\n    });\r\n  }\r\n};\r\n\r\nexport const editVideo = (videoId, title, description) => async (dispatch) => {\r\n  try {\r\n    const data = {\r\n      id: videoId,\r\n      title: title,\r\n      description: description,\r\n    };\r\n\r\n    const params = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    await axios.post(\"/video/edit\", data, params);\r\n\r\n    window.location.href = `/video/${videoId}`;\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GET_ERRORS,\r\n      payload: err.response.data,\r\n    });\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { getPosterSrc } from \"../../actions/videoActions\";\r\n\r\nclass Poster extends React.Component {\r\n  state = {\r\n    width: 0,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.setState({\r\n      width: this.posterContainer.clientWidth,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const posterId = this.props.posterId;\r\n    const api_url = getPosterSrc(posterId);\r\n    return (\r\n      <div\r\n        ref={(cont) => (this.posterContainer = cont)}\r\n        style={{\r\n          height: this.state.width * 0.7,\r\n        }}\r\n      >\r\n        <img className=\"poster\" src={api_url} alt={this.props.alt} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Poster;\r\n","import React from \"react\";\r\nimport Poster from \"./Poster\";\r\n\r\nconst VideoPreview = (props) => {\r\n  const videoUri = \"/video/\" + props.video.id;\r\n\r\n  return (\r\n    <a\r\n      className=\"nav-link text-muted\"\r\n      href={videoUri}\r\n      poster={props.video.poster.id}\r\n    >\r\n      <div className=\"videoPreview card-body\">\r\n        {!props.video.available && (\r\n          <div className=\"badge badge-pill badge-warning position-absolute font-weight-light mt-1 ml-1\">\r\n            не опубликовано\r\n          </div>\r\n        )}\r\n        <div>\r\n          <Poster posterId={props.video.poster.id} alt={props.video.title} />\r\n        </div>\r\n        <p className=\"text-center font-weight-bold\">{props.video.title}</p>\r\n        <small className=\"muted\">\r\n          <div>\r\n            Автор:{\" \"}\r\n            {props.video.author\r\n              ? props.video.author.fullName\r\n                ? props.video.author.fullName\r\n                : \"Неизвестен\"\r\n              : \"Неизвестен\"}\r\n          </div>\r\n          <div>Загружен: {props.video.createdAt}</div>\r\n          <div>Просмотров: {props.video.views}</div>\r\n        </small>\r\n      </div>\r\n    </a>\r\n  );\r\n};\r\n\r\nexport default VideoPreview;\r\n","import React from \"react\";\r\nimport Header from \"../Elements/Header\";\r\nimport VideoPreview from \"../Elements/VideoPreview\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { getVideos } from \"../../actions/videoActions\";\r\n\r\nclass MainPage extends React.Component {\r\n  searchingVideo = (e) => {\r\n    e.preventDefault();\r\n    var mask = e.target.elements.mask.value;\r\n    this.props.getVideos(mask, true);\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.getVideos(\"\", true);\r\n  }\r\n\r\n  render() {\r\n    const { videos } = this.props.videos;\r\n    return (\r\n      <div>\r\n        <Header searchingMethod={this.searchingVideo} />\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row pt-3\">\r\n            {videos.map((video) => {\r\n              return (\r\n                <div\r\n                  key={video.id}\r\n                  className=\"col-sm-12 col-md-4 col-lg-3 videoPreview\"\r\n                >\r\n                  <VideoPreview video={video} />\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMainPage.propTypes = {\r\n  getVideos: PropTypes.func.isRequired,\r\n  videos: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  videos: state.videos,\r\n});\r\n\r\nexport default connect(mapStateToProps, { getVideos })(MainPage);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport Plyr from \"plyr\";\r\nimport { getPosterSrc, getVideoSrc } from \"../../actions/videoActions\";\r\n\r\nclass Video extends React.Component {\r\n  state = {\r\n    video: undefined,\r\n  };\r\n\r\n  shouldComponentUpdate(newProps, oldProps) {\r\n    console.log(newProps.video);\r\n    console.log(oldProps.video);\r\n    if (newProps.video !== oldProps.video && this.state.video === undefined) {\r\n      this.setState({\r\n        video: newProps.video,\r\n      });\r\n      this.createPlayer(newProps.video);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  createPlayer(video) {\r\n    let posterSrc = getPosterSrc(video.poster.id);\r\n    let streams = [];\r\n    video.videos.forEach((video) => {\r\n      let videoSrc = getVideoSrc(video.resolution, video.name);\r\n      let stream = {\r\n        src: videoSrc,\r\n        type: video.mimeType,\r\n        size: video.resolution,\r\n      };\r\n      streams.push(stream);\r\n    });\r\n\r\n    let player = new Plyr(document.getElementById(\"player\"), {\r\n      title: video.title,\r\n      controls: [\r\n        \"play-large\",\r\n        \"play\",\r\n        \"progress\",\r\n        \"current-time\",\r\n        \"mute\",\r\n        \"volume\",\r\n        \"settings\",\r\n        \"fullscreen\",\r\n      ],\r\n      settings: [\"quality\", \"speed\"],\r\n      autoplay: this.props.autoplay,\r\n      autopause: true,\r\n      clickToPlay: true,\r\n      hideControls: true,\r\n      fullscreen: {\r\n        enabled: true,\r\n      },\r\n    });\r\n\r\n    player.source = {\r\n      type: \"video\",\r\n      title: video.title,\r\n      sources: streams,\r\n      poster: posterSrc,\r\n    };\r\n\r\n    player.quality = {\r\n      default: \"480\",\r\n    };\r\n  }\r\n\r\n  render() {\r\n    this.createPlayer(this.props.video);\r\n    return (\r\n      <div>\r\n        <video id=\"player\" preload=\"auto\" controls width=\"auto\" height=\"100%\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nVideo.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Video);\r\n","import React from \"react\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport axios from \"axios\";\r\n\r\nconst IframePopup = (props) => {\r\n  const iframeText =\r\n    \"<iframe \" +\r\n    \"title='\" +\r\n    props.video.title +\r\n    \"' \" +\r\n    \"src='http://localhost:3000/embed/\" +\r\n    props.video.id +\r\n    \"' \" +\r\n    \"frameBorder='0' \" +\r\n    \"height= '300' \" +\r\n    \"width='\" +\r\n    300 * 1.77 +\r\n    \"' allowfullscreen />\";\r\n  return (\r\n    <Modal show={props.show} animation={false} onHide={props.hide}>\r\n      <Modal.Body>\r\n        <p>Скопируйте текст в необходимую страницу</p>\r\n        <textarea\r\n          className=\"form-control w-100\"\r\n          defaultValue={iframeText}\r\n          rows=\"3\"\r\n          style={{ fontSize: \"0.8em\" }}\r\n        />\r\n      </Modal.Body>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nIframePopup.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(IframePopup);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { setAvailability } from \"../../../actions/videoActions\";\r\n\r\nclass Availability extends React.Component {\r\n  updateAvailability = (availability) => {\r\n    this.props.setAvailability(this.props.video.id, availability);\r\n  };\r\n\r\n  render() {\r\n    switch (this.props.user.role) {\r\n      case \"ADMINISTRATOR\":\r\n      case \"MODERATOR\":\r\n        if (this.props.video.available) {\r\n          return (\r\n            <div onClick={() => this.updateAvailability(false)}>\r\n              снять с публикации\r\n            </div>\r\n          );\r\n        } else {\r\n          return (\r\n            <div onClick={() => this.updateAvailability(true)}>\r\n              опубликовать\r\n            </div>\r\n          );\r\n        }\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n}\r\n\r\nAvailability.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n  setAvailability: PropTypes.func.isRequired,\r\n  user: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n    user: state.security.user,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { setAvailability })(Availability);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Edit extends React.Component {\r\n  redirectToEditPage() {\r\n    window.location.href = `/edit/${this.props.video.id}`;\r\n  }\r\n\r\n  render() {\r\n    return <div onClick={() => this.redirectToEditPage()}>редактировать</div>;\r\n  }\r\n}\r\n\r\nEdit.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Edit);\r\n","import React from \"react\";\r\nimport Dropdown from \"react-bootstrap/Dropdown\";\r\nimport IframePopup from \"./VideoMenu/IframePopup\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport Availability from \"../Elements/VideoMenu/Availability\";\r\nimport Edit from \"./VideoMenu/Edit\";\r\n\r\nclass VideoActionsMenu extends React.Component {\r\n  state = {\r\n    showIframePopup: false,\r\n  };\r\n\r\n  showIframePopup = () => {\r\n    this.setState({\r\n      showIframePopup: true,\r\n    });\r\n  };\r\n\r\n  hideIframePopup = () => {\r\n    this.setState({\r\n      showIframePopup: false,\r\n    });\r\n  };\r\n\r\n  getMenuItems() {\r\n    var menuItems = [];\r\n    switch (this.props.user.role) {\r\n      case \"ADMINISTRATOR\":\r\n      case \"MODERATOR\":\r\n        menuItems.push(\r\n          <Dropdown.Item onClick={this.showIframePopup}>\r\n            встроить видео\r\n          </Dropdown.Item>\r\n        );\r\n        menuItems.push(\r\n          <Dropdown.Item>\r\n            <Availability />\r\n          </Dropdown.Item>\r\n        );\r\n        menuItems.push(\r\n          <Dropdown.Item>\r\n            <Edit />\r\n          </Dropdown.Item>\r\n        );\r\n        break;\r\n\r\n      case \"CREATOR\":\r\n        {\r\n          menuItems.push(\r\n            <Dropdown.Item onClick={this.showIframePopup}>\r\n              встроить видео\r\n            </Dropdown.Item>\r\n          );\r\n          const videoAuthor = this.props.video.author\r\n            ? this.props.video.author.username\r\n            : \"\";\r\n          const username = this.props.user.username;\r\n          if (username !== undefined && username === videoAuthor) {\r\n            menuItems.push(\r\n              <Dropdown.Item>\r\n                <Edit />\r\n              </Dropdown.Item>\r\n            );\r\n          }\r\n        }\r\n        break;\r\n      default:\r\n        menuItems.push(\r\n          <Dropdown.Item onClick={this.showIframePopup}>\r\n            встроить видео\r\n          </Dropdown.Item>\r\n        );\r\n        break;\r\n    }\r\n    return menuItems;\r\n  }\r\n\r\n  render() {\r\n    const menuItems = this.getMenuItems();\r\n\r\n    return (\r\n      <div>\r\n        <IframePopup\r\n          show={this.state.showIframePopup}\r\n          hide={this.hideIframePopup}\r\n        />\r\n\r\n        <Dropdown>\r\n          <Dropdown.Toggle\r\n            className=\"btn-sm mt-1 float-right btn-outline-light\"\r\n            style={{ fontSize: \"0.8em\", backgroundColor: \"#50c779\" }}\r\n          >\r\n            Меню\r\n          </Dropdown.Toggle>\r\n          <Dropdown.Menu style={{ fontSize: \"0.8em\" }}>\r\n            {menuItems.map((menuItem, index, array) => (\r\n              <div key={index}>{menuItem}</div>\r\n            ))}\r\n          </Dropdown.Menu>\r\n        </Dropdown>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nVideoActionsMenu.propTypes = {\r\n  user: PropTypes.object.isRequired,\r\n  video: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.security.user,\r\n    video: state.videos.video,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(VideoActionsMenu);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport Video from \"../Elements/Video\";\r\nimport VideoActionsMenu from \"../Elements/VideoActionsMenu\";\r\n\r\nclass VideoContainer extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"col-sm-12 pt-3\">\r\n        <div>\r\n          <Video />\r\n        </div>\r\n\r\n        {!this.props.video.available && (\r\n          <div className=\"alert alert-warning\">\r\n            В настоящее время видео снято с пуликации.\r\n          </div>\r\n        )}\r\n\r\n        <VideoActionsMenu />\r\n\r\n        <div>\r\n          <h4>{this.props.video.title}</h4>\r\n        </div>\r\n        <small className=\"text-muted\">\r\n          <div className=\"d-inline\">\r\n            Автор:{\" \"}\r\n            {this.props.video.author\r\n              ? this.props.video.author.fullName\r\n                ? this.props.video.author.fullName\r\n                : \"Неизвестен\"\r\n              : \"Неизвестен\"}\r\n          </div>\r\n          <div className=\"d-inline float-right\">\r\n            Загружено: {this.props.video.createdAt}\r\n          </div>\r\n\r\n          <div>Просмотров: {this.props.video.views}</div>\r\n        </small>\r\n        <hr />\r\n        <div className=\"\">{this.props.video.description}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nVideoContainer.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(VideoContainer);\r\n","import React from \"react\";\r\nimport VideoPreview from \"../Elements/VideoPreview\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { getRecommendations } from \"../../actions/videoActions\";\r\n\r\nclass Recomendations extends React.Component {\r\n  state = {\r\n    video: {},\r\n    errors: {},\r\n  };\r\n  componentDidUpdate(newProps) {\r\n    if (newProps.video.id && newProps.video.id !== this.state.video.id) {\r\n      this.setState({\r\n        video: newProps.video,\r\n      });\r\n      this.props.getRecommendations(newProps.video.id);\r\n    } else if (\r\n      newProps.errors.message &&\r\n      newProps.errors.message !== this.state.errors.message\r\n    ) {\r\n      this.setState({\r\n        errors: newProps.errors,\r\n      });\r\n      this.props.getRecommendations(-1);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <p className=\"breadcrumb breadcrumb-item active mt-3\">Рекомендации</p>\r\n        {this.props.recommendations.map((recommendation) => (\r\n          <div key={recommendation.id} className=\"videoPreview\">\r\n            <VideoPreview video={recommendation} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nRecomendations.propTypes = {\r\n  getRecommendations: PropTypes.func.isRequired,\r\n  errors: PropTypes.object.isRequired,\r\n  video: PropTypes.object.isRequired,\r\n  recommendations: PropTypes.array.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n    errors: state.errors,\r\n    recommendations: state.videos.recommendations,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getRecommendations })(Recomendations);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass NoVideoContainer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.cont = React.createRef();\r\n\r\n    this.state = {\r\n      clientWidth: 0,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      clientWidth: this.cont.current.clientWidth,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <div\r\n          ref={this.cont}\r\n          className=\"row text-secondary\"\r\n          style={{\r\n            height: this.state.clientWidth * 0.56,\r\n          }}\r\n        >\r\n          <div className=\"my-auto col-12 text-center\">\r\n            <p className=\"h4\">Упс...</p>\r\n            {this.props.error.message}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nNoVideoContainer.propTypes = {\r\n  error: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    error: state.errors,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(NoVideoContainer);\r\n","import React from \"react\";\r\nimport VideoContainer from \"../containers/VideoContainer\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { getVideo } from \"../../actions/videoActions\";\r\nimport Header from \"../Elements/Header\";\r\nimport Recomendations from \"../Elements/Recomendations\";\r\nimport NoVideoContainer from \"../containers/NoVideoContainer\";\r\n\r\nclass TestPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const videoId = this.props.match.params.videoId;\r\n\r\n    if (videoId !== undefined) {\r\n      this.props.getVideo(videoId);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const errorMessage = this.props.error.message;\r\n    const video = this.props.video;\r\n    return (\r\n      <div>\r\n        <Header />\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-12 col-lg-8\">\r\n              {errorMessage ? (\r\n                <NoVideoContainer />\r\n              ) : (\r\n                this.props.video.id && <VideoContainer />\r\n              )}\r\n            </div>\r\n            <div className=\"col-12 col-lg-4\">\r\n              <Recomendations />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTestPage.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n  getVideo: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n    error: state.errors,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getVideo })(TestPage);\r\n","import React from \"react\";\r\nimport Header from \"../Elements/Header\";\r\nimport { connect } from \"react-redux\";\r\nimport { getUserVideos } from \"../../actions/videoActions\";\r\nimport PropTypes from \"prop-types\";\r\nimport VideoPreview from \"../Elements/VideoPreview\";\r\n\r\nclass UserVideoPage extends React.Component {\r\n  state = {\r\n    videos: [],\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.getUserVideos();\r\n  }\r\n\r\n  componentWillReceiveProps(newProps) {\r\n    if (newProps.videos) {\r\n      this.setState({\r\n        videos: newProps.videos,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Header searchingMethod={this.searchingVideo} />\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row pt-3\">\r\n            {this.state.videos\r\n              ? this.state.videos.map((video) => {\r\n                  return (\r\n                    <div\r\n                      key={video.id}\r\n                      className=\"col-sm-12 col-md-4 col-lg-3 videoPreview\"\r\n                    >\r\n                      <VideoPreview video={video} />\r\n                    </div>\r\n                  );\r\n                })\r\n              : {}}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nUserVideoPage.propTypes = {\r\n  videos: PropTypes.array.isRequired,\r\n  getUserVideos: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    videos: state.videos.videos,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getUserVideos })(UserVideoPage);\r\n","import React from \"react\";\r\nimport Header from \"../Elements/Header\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { userAuthentication } from \"../../actions/userActions\";\r\nimport classnames from \"classnames\";\r\n\r\nclass LoginPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      password: \"\",\r\n      errors: {},\r\n    };\r\n    if (this.props.security.validToken) {\r\n      window.location.href = \"/\";\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.errors) {\r\n      this.setState({\r\n        errors: nextProps.errors,\r\n      });\r\n    }\r\n  }\r\n\r\n  onChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  onLogin = (e) => {\r\n    e.preventDefault();\r\n    const creditials = {\r\n      username: this.state.username,\r\n      password: this.state.password,\r\n    };\r\n    this.props.userAuthentication(creditials);\r\n  };\r\n\r\n  render() {\r\n    const errors = this.state.errors;\r\n    if (this.props.security.validToken) {\r\n      window.location.href = \"/\";\r\n    } else\r\n      return (\r\n        <div>\r\n          <Header />\r\n          <div className=\"container\">\r\n            <div className=\"row justify-content-center\">\r\n              <div className=\"col-12 col-md-4 position-absolute login-form \">\r\n                <form onSubmit={this.onLogin}>\r\n                  <div className=\"form-group\">\r\n                    <input\r\n                      type=\"text\"\r\n                      className={classnames(\"form-control\", {\r\n                        \"is-invalid\": errors.username,\r\n                      })}\r\n                      placeholder=\"ЛДАП\"\r\n                      value={this.state.username}\r\n                      name=\"username\"\r\n                      onChange={this.onChange}\r\n                    />\r\n                    {errors.username && (\r\n                      <div className=\"invalid-feedback\">{errors.username}</div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <input\r\n                      type=\"password\"\r\n                      className={classnames(\"form-control\", {\r\n                        \"is-invalid\": errors.password,\r\n                      })}\r\n                      name=\"password\"\r\n                      value={this.state.password}\r\n                      onChange={this.onChange}\r\n                      placeholder=\"Пароль\"\r\n                    />\r\n                    {errors.password && (\r\n                      <div className=\"invalid-feedback\">{errors.password}</div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"form-group text-center\">\r\n                    <button\r\n                      className=\"btn btn-success btn-primary btn-lg\"\r\n                      type=\"submit\"\r\n                    >\r\n                      Войти\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n  }\r\n}\r\n\r\nLoginPage.propTypes = {\r\n  userAuthentication: PropTypes.func.isRequired,\r\n  errors: PropTypes.object.isRequired,\r\n  security: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  security: state.security,\r\n  errors: state.errors,\r\n});\r\n\r\nexport default connect(mapStateToProps, { userAuthentication })(LoginPage);\r\n","import {GET_ERRORS} from \"../actions/types\"\r\n\r\n const initialState = {};\r\n\r\n export default function(state=initialState, action){\r\n     switch (action.type){\r\n        case GET_ERRORS:\r\n            return action.payload;\r\n        default:\r\n            return state;\r\n     }\r\n }","import {\r\n  GET_VIDEOS,\r\n  GET_SELECTED_VIDEO,\r\n  GET_RECOMMENDATIONS,\r\n} from \"../actions/types\";\r\n\r\nconst initialState = {\r\n  videos: [],\r\n  video: {},\r\n  recommendations: [],\r\n};\r\n\r\nexport default function (state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_VIDEOS:\r\n      return {\r\n        ...state,\r\n        videos: action.payload,\r\n      };\r\n    case GET_SELECTED_VIDEO:\r\n      return {\r\n        ...state,\r\n        video: action.payload,\r\n      };\r\n    case GET_RECOMMENDATIONS:\r\n      return {\r\n        ...state,\r\n        recommendations: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { SET_CURRENT_USER } from \"../actions/types\";\r\n\r\nconst initialState ={\r\n    user: {},\r\n    validToken: false\r\n}\r\n\r\nconst booleanActionPayload = (payload) =>{\r\n    if (payload){\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport default function (state = initialState, action){\r\n    switch (action.type) {\r\n        case SET_CURRENT_USER: \r\n            return {\r\n                ...state,\r\n                validToken: booleanActionPayload(action.payload),\r\n                user: action.payload\r\n            }           \r\n                \r\n        default:\r\n            return state;\r\n    }\r\n} ","import {combineReducers} from \"redux\"\r\nimport errorReducer from \"./errorReducer\"\r\nimport videoReducer from \"./videoReducer\"\r\nimport userReducer from \"./userReducer\"\r\n\r\nexport default combineReducers({\r\n    errors: errorReducer,\r\n    videos: videoReducer,\r\n    security: userReducer\r\n})","import { createStore, compose, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport rootReducer from \"./reducers/rootReducer\";\r\n\r\nconst initialState = {};\r\nconst middleware = [thunk];\r\n\r\nlet store = {};\r\n\r\nif (window.navigator.userAgent.includes(\"Chrome\")) {\r\n  store = createStore(\r\n    rootReducer,\r\n    initialState,\r\n    compose(\r\n      applyMiddleware(...middleware),\r\n      window.__REDUX_DEVTOOLS_EXTENSION__ &&\r\n        window.__REDUX_DEVTOOLS_EXTENSION__()\r\n    )\r\n  );\r\n} else {\r\n  store = createStore(\r\n    rootReducer,\r\n    initialState,\r\n    compose(applyMiddleware(...middleware))\r\n  );\r\n}\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport Video from \"./Video\";\r\nimport NoVideoContainer from \"../containers/NoVideoContainer\";\r\nimport { getVideo } from \"../../actions/videoActions\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass EmbedVideo extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.props.getVideo(this.props.match.params.videoId);\r\n\r\n    this.state = {\r\n      video: undefined,\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(newProps) {\r\n    if (newProps.video && newProps.video !== this.state.video) {\r\n      this.setState({\r\n        video: newProps.video,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.props.error.message ? (\r\n          <NoVideoContainer />\r\n        ) : (\r\n          this.state.video && <Video />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nEmbedVideo.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n  getVideo: PropTypes.func.isRequired,\r\n  error: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n    error: state.errors,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getVideo })(EmbedVideo);\r\n","import React from \"react\";\r\nimport Header from \"../Elements/Header\";\r\nimport { connect } from \"react-redux\";\r\nimport { getVideos } from \"../../actions/videoActions\";\r\nimport PropTypes from \"prop-types\";\r\nimport VideoPreview from \"../Elements/VideoPreview\";\r\n\r\nclass Moderation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    if (!props.validToken) {\r\n      window.location.href = \"/login\";\r\n    }\r\n    switch (props.user.role) {\r\n      case \"ADMINISTRATOR\":\r\n      case \"MODERATOR\":\r\n        break;\r\n      default:\r\n        window.location.href = \"/\";\r\n    }\r\n  }\r\n\r\n  searchingVideo = (e) => {\r\n    e.preventDefault();\r\n    var mask = e.target.elements.mask.value;\r\n    this.props.getVideos(mask, false);\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.props.getVideos(\"\", false);\r\n  };\r\n\r\n  render() {\r\n    const { videos } = this.props.videos;\r\n    return (\r\n      <div>\r\n        <Header searchingMethod={this.searchingVideo} />\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row pt-3\">\r\n            {videos.map((video) => {\r\n              return (\r\n                <div\r\n                  key={video.id}\r\n                  className=\"col-sm-12 col-md-4 col-lg-3 videoPreview\"\r\n                >\r\n                  <VideoPreview video={video} />\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nModeration.propTypes = {\r\n  videos: PropTypes.object.isRequired,\r\n  getVideos: PropTypes.func.isRequired,\r\n  user: PropTypes.object.isRequired,\r\n  validToken: PropTypes.bool.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    videos: state.videos,\r\n    user: state.security.user,\r\n    validToken: state.security.validToken,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getVideos })(Moderation);\r\n","import React from \"react\";\r\nimport Header from \"../Elements/Header\";\r\n\r\nconst PageNotFound = () => {\r\n  return (\r\n    <div>\r\n      <Header />\r\n      <div className=\"mt-3 row text-secondary\">\r\n        <div className=\"my-auto col-12 text-center\">\r\n          <p className=\"h4\">Упс...</p>\r\n          Страница не найдена.\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageNotFound;\r\n","import React, { Component } from \"react\";\r\nimport { uploadVideoDetails } from \"../../actions/videoActions\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport classnames from \"classnames\";\r\n\r\nclass UploadVideoContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      title: \"\",\r\n      description: \"\",\r\n      videoFile: {},\r\n      posterFile: {},\r\n    };\r\n  }\r\n\r\n  submitForm = (e) => {\r\n    e.preventDefault();\r\n    const videoDetails = {\r\n      title: this.state.title,\r\n      description: this.state.description,\r\n      videoFile: this.state.videoFile,\r\n      posterFile: this.state.posterFile,\r\n    };\r\n    this.props.uploadVideoDetails(videoDetails, this.props.history);\r\n  };\r\n\r\n  onChange = (e) => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  };\r\n\r\n  onSelectFile = (e) => {\r\n    this.setState({ [e.target.name]: e.target.files[0] });\r\n  };\r\n\r\n  render() {\r\n    //const { errors } = this.state;\r\n    const errors = this.props.errors;\r\n    return (\r\n      <div>\r\n        <div className=\"container\">\r\n          <p className=\"h4 text-center text-secondary\">Загрузка видео</p>\r\n          <form\r\n            className=\"text-left col-8 offset-2\"\r\n            onSubmit={this.submitForm}\r\n            encType=\"multipart/form-data\"\r\n          >\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"title\">Заголовок</label>\r\n              <input\r\n                type=\"text\"\r\n                className={classnames(\"form-control\", {\r\n                  \"is-invalid\": errors.title,\r\n                })}\r\n                id=\"title\"\r\n                name=\"title\"\r\n                onChange={this.onChange}\r\n              />\r\n              {errors.title && (\r\n                <div className=\"invalid-feedback\">{errors.title}</div>\r\n              )}\r\n              <small className=\"text-muted\">\r\n                * Заголовок должен быть коротким, но точно отражающим суть видео\r\n              </small>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"description\">Описание к видео</label>\r\n              <textarea\r\n                className={classnames(\"form-control\", {\r\n                  \"is-invalid\": errors.description,\r\n                })}\r\n                name=\"description\"\r\n                id=\"description\"\r\n                onChange={this.onChange}\r\n                rows=\"5\"\r\n              ></textarea>\r\n              {errors.description && (\r\n                <div className=\"invalid-feedback\">{errors.description}</div>\r\n              )}\r\n              <small className=\"text-muted\">\r\n                * Короткое, но ёмкое по смыслу описание загружаемого видео\r\n              </small>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"videoFile\">Видеофайл</label>\r\n              <input\r\n                type=\"file\"\r\n                name=\"videoFile\"\r\n                id=\"videoFile\"\r\n                className=\"form-control-file\"\r\n                onChange={this.onSelectFile}\r\n                accept=\"video/*\"\r\n              />\r\n              {errors.videoFile && (\r\n                <div className=\"invalid-feedback d-block\">\r\n                  {errors.videoFile}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"posterFile\">Постер к видео</label>\r\n              <input\r\n                type=\"file\"\r\n                name=\"posterFile\"\r\n                id=\"posterFile\"\r\n                className=\"form-control-file\"\r\n                onChange={this.onSelectFile}\r\n                accept=\"image/*\"\r\n              />\r\n              {errors.posterFile && (\r\n                <div className=\"invalid-feedback d-block\">\r\n                  {errors.posterFile}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn btn-primary btn-success btn-lg\"\r\n              >\r\n                Загрузить\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nUploadVideoContainer.propTypes = {\r\n  uploadVideoDetails: PropTypes.func.isRequired,\r\n  errors: PropTypes.object.isRequired,\r\n  user: PropTypes.object.isRequired,\r\n  validToken: PropTypes.bool.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  errors: state.errors,\r\n  user: state.security.user,\r\n  validToken: state.security.validToken,\r\n});\r\n\r\nexport default connect(mapStateToProps, { uploadVideoDetails })(\r\n  UploadVideoContainer\r\n);\r\n","import React from \"react\";\r\nimport UploadVideoContainer from \"../containers/UploadVideoContainer\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport Header from \"./../Elements/Header\";\r\n\r\nconst UploadVideoPage = (props) => {\r\n  if (props.validToken) {\r\n    return (\r\n      <div>\r\n        <Header />\r\n        <UploadVideoContainer />\r\n      </div>\r\n    );\r\n  } else window.location.href = \"/login\";\r\n};\r\n\r\nUploadVideoPage.propTypes = {\r\n  validToken: PropTypes.bool.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    validToken: state.security.validToken,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(UploadVideoPage);\r\n","import React from \"react\";\r\nimport VideoContainer from \"../containers/VideoContainer\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { getVideo } from \"../../actions/videoActions\";\r\n\r\nclass TestPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const videoId = this.props.match.params.videoId;\r\n\r\n    this.state = {\r\n      videoId: videoId,\r\n      video: {},\r\n    };\r\n\r\n    if (videoId !== undefined) {\r\n      this.props.getVideo(videoId);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"col-12 col-lg-8\">\r\n          <VideoContainer />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTestPage.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n  getVideo: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getVideo })(TestPage);\r\n","var ROLES = {\r\n  ADMINISTRATOR: \"ADMINISTRATOR\",\r\n  MODERATOR: \"MODERATOR\",\r\n  CREATOR: \"CREATOR\",\r\n};\r\n\r\nexport default ROLES;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { getVideo } from \"../../actions/videoActions\";\r\nimport roles from \"../../roles\";\r\nimport Header from \"../Elements/Header\";\r\nimport classnames from \"classnames\";\r\nimport { editVideo } from \"../../actions/videoActions\";\r\n\r\nclass EditVideoPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    if (!this.props.validToken) window.location.href = `/404`;\r\n    switch (this.props.user.role) {\r\n      case roles.ADMINISTRATOR:\r\n      case roles.MODERATOR:\r\n      case roles.CREATOR:\r\n        this.props.getVideo(this.props.match.params.videoId);\r\n        break;\r\n      default:\r\n        window.location.href = `/404`;\r\n        break;\r\n    }\r\n\r\n    this.state = {\r\n      title: \"\",\r\n      description: \"\",\r\n      titleIsEdited: false,\r\n      descriptionIsEdited: false,\r\n      errors: {},\r\n    };\r\n\r\n    this.title = React.createRef();\r\n    this.description = React.createRef();\r\n  }\r\n\r\n  componentDidUpdate(newProps, oldProps) {\r\n    if (newProps !== oldProps && newProps.video.id !== undefined) {\r\n      if (\r\n        newProps.user.role === roles.CREATOR &&\r\n        newProps.video.author.username !== newProps.user.username\r\n      ) {\r\n        window.location.href = \"/404\";\r\n      }\r\n\r\n      if (this.title.current.value === \"\" && !this.state.titleIsEdited) {\r\n        this.title.current.value = newProps.video.title;\r\n        this.setState({\r\n          title: this.title.current.value,\r\n          titleIsEdited: true,\r\n        });\r\n      }\r\n\r\n      if (\r\n        this.description.current.value === \"\" &&\r\n        !this.state.descriptionIsEdited\r\n      ) {\r\n        this.description.current.value = newProps.video.description;\r\n        this.setState({\r\n          description: this.description.current.value,\r\n          descriptionIsEdited: true,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {}\r\n\r\n  onChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  onSubmit = (e) => {\r\n    e.preventDefault();\r\n    const videoId = this.props.match.params.videoId;\r\n    const title = this.state.title;\r\n    const description = this.state.description;\r\n    this.props.editVideo(videoId, title, description);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Header />\r\n        <div className=\"row\">\r\n          {!this.props.errors.message ? (\r\n            this.props.video.id && (\r\n              <div className=\"my-auto col-8 offset-2\">\r\n                <form onSubmit={this.onSubmit}>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"title\">Заголовок</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      className={classnames(\"form-control\", {\r\n                        \"is-invalid\": this.props.errors.title,\r\n                      })}\r\n                      name=\"title\"\r\n                      ref={this.title}\r\n                      value={this.state.title}\r\n                      onChange={this.onChange}\r\n                    />\r\n                    {this.props.errors.title && (\r\n                      <div className=\"invalid-feedback\">\r\n                        {this.props.errors.title}\r\n                      </div>\r\n                    )}\r\n                    <small className=\"text-muted\">\r\n                      * Заголовок должен быть коротким, но точно отражающим суть\r\n                      видео\r\n                    </small>\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"description\">Описание к видео</label>\r\n                    <textarea\r\n                      className={classnames(\"form-control\", {\r\n                        \"is-invalid\": this.props.errors.description,\r\n                      })}\r\n                      ref={this.description}\r\n                      value={this.state.description}\r\n                      name=\"description\"\r\n                      rows=\"5\"\r\n                      onChange={this.onChange}\r\n                    ></textarea>\r\n                    {this.props.errors.description && (\r\n                      <div className=\"invalid-feedback\">\r\n                        {this.props.errors.description}\r\n                      </div>\r\n                    )}\r\n                    <small className=\"text-muted\">\r\n                      * Короткое, но ёмкое по смыслу описание видео\r\n                    </small>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <button\r\n                      type=\"submit\"\r\n                      className=\"btn btn-primary btn-success btn-lg\"\r\n                    >\r\n                      Сохранить\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            )\r\n          ) : (\r\n            <div className=\"col-12 text-center mt-4 text-secondary\">\r\n              {this.props.errors.message}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nEditVideoPage.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n  user: PropTypes.object.isRequired,\r\n  getVideo: PropTypes.func.isRequired,\r\n  editVideo: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n    user: state.security.user,\r\n    errors: state.errors,\r\n    validToken: state.security.validToken,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getVideo, editVideo })(EditVideoPage);\r\n","import React from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  Redirect,\r\n  Switch,\r\n} from \"react-router-dom\";\r\nimport MainPage from \"./components/pages/MainPage\";\r\nimport VideoPage from \"./components/pages/VideoPage\";\r\nimport UserVideoPage from \"./components/pages/UserVideoPage\";\r\nimport LoginPage from \"./components/pages/LoginPage\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./store\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport setJWTToken from \"./securityUtils/setJWTToken\";\r\nimport { SET_CURRENT_USER } from \"./actions/types\";\r\nimport { userLogout } from \"./actions/userActions\";\r\nimport EmbedVideo from \"./components/Elements/EmbedVideo\";\r\nimport Moderation from \"./components/pages/Moderation\";\r\nimport PageNotFound from \"./components/pages/PageNotFound\";\r\nimport UploadVideoPage from \"./components/pages/UploadVideoPage\";\r\nimport TestPage from \"./components/pages/TestPage\";\r\nimport EditVideoPage from \"./components/pages/EditVideoPage\";\r\n\r\nconst jwtToken = localStorage.jwtToken;\r\n\r\nif (jwtToken) {\r\n  setJWTToken(jwtToken);\r\n  const decoded = jwt_decode(jwtToken);\r\n  store.dispatch({\r\n    type: SET_CURRENT_USER,\r\n    payload: decoded,\r\n  });\r\n\r\n  const currentType = Date.now() / 1000;\r\n  if (decoded.exp < currentType) {\r\n    store.dispatch(userLogout());\r\n    window.location.href = \"/\";\r\n  }\r\n}\r\n\r\nclass App extends React.Component {\r\n  render() {\r\n    return (\r\n      <Provider store={store}>\r\n        <div className=\"App\">\r\n          <Router>\r\n            <Switch>\r\n              <Route exact path=\"/\" component={MainPage} />\r\n              <Route exact path=\"/login\" component={LoginPage} />\r\n              <Route exact path=\"/video/:videoId\" component={VideoPage} />\r\n              <Route exact path=\"/embed/:videoId\" component={EmbedVideo} />\r\n              <Route exact path=\"/uploading\" component={UploadVideoPage} />\r\n              <Route exact path=\"/user-videos\" component={UserVideoPage} />\r\n              <Route exact path=\"/moderation\" component={Moderation} />\r\n              <Route exact path=\"/edit/:videoId\" component={EditVideoPage} />\r\n              <Route exact path=\"/test/:videoId\" component={TestPage} />\r\n              <Route exact path=\"/404\" component={PageNotFound} />\r\n              <Redirect from=\"*\" to=\"/404\" />\r\n            </Switch>\r\n          </Router>\r\n        </div>\r\n      </Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport \"./App.css\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}