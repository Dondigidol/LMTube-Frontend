{"version":3,"sources":["components/Elements/SearchForm.js","securityUtils/setJWTToken.js","actions/userActions.js","actions/types.js","components/Elements/Header.js","actions/videoActions.js","components/Elements/Poster.js","components/Elements/VideoPreview.js","components/pages/MainPage.js","components/Elements/Video.js","components/Elements/VideoMenu/IframePopup.js","components/Elements/VideoMenu/Availability.js","components/Elements/VideoMenu/Edit.js","components/Elements/VideoActionsMenu.js","components/containers/VideoContainer.js","components/Elements/Recomendations.js","components/containers/NoVideoContainer.js","components/pages/VideoPage.js","components/pages/UserVideoPage.js","components/pages/LoginPage.js","reducers/errorReducer.js","reducers/videoReducer.js","reducers/userReducer.js","reducers/rootReducer.js","store.js","components/Elements/EmbedVideo.js","components/pages/Moderation.js","components/pages/PageNotFound.js","components/Elements/Loader.js","components/containers/UploadVideoContainer.js","components/pages/UploadVideoPage.js","components/pages/TestPage.js","roles.js","components/pages/EditVideoPage.js","App.js","serviceWorker.js","index.js"],"names":["SearchForm","props","className","onSubmit","searchingMethod","type","placeholder","name","setJWTToken","token","axios","defaults","headers","common","userLogout","dispatch","localStorage","removeItem","payload","pages","Header","componentDidMount","path","window","location","pathname","forEach","page","setState","searchEnabled","menuButtonClick","menu","current","style","display","state","React","createRef","this","security","validToken","user","curPath","accessLevel","role","headerLinks","userIsAuthenticated","id","ref","map","key","classnames","href","userNotAuthenticated","data-toggle","data-target","aria-controls","aria-expanded","aria-label","onClick","fullName","Component","connect","baseURL","getVideos","searchMask","availability","a","get","res","data","getVideo","videoId","response","getPosterSrc","posterId","Poster","width","posterContainer","clientWidth","api_url","cont","height","src","alt","VideoPreview","videoUri","video","poster","available","title","author","createdAt","views","MainPage","searchingVideo","e","preventDefault","mask","target","elements","value","videos","Video","posterSrc","streams","resolution","stream","mimeType","size","push","player","Plyr","document","getElementById","controls","settings","autoplay","autopause","clickToPlay","hideControls","fullscreen","enabled","source","sources","quality","default","createPlayer","preload","iframeText","origin","Modal","show","animation","onHide","hide","Body","defaultValue","rows","fontSize","Availability","updateAvailability","setAvailability","post","Edit","redirectToEditPage","VideoActionsMenu","showIframePopup","hideIframePopup","menuItems","Dropdown","Item","videoAuthor","username","undefined","getMenuItems","Toggle","backgroundColor","Menu","menuItem","index","array","VideoContainer","description","Recomendations","newVideo","getRecommendations","recommendations","recommendation","errors","NoVideoContainer","error","message","TestPage","match","params","errorMessage","UserVideoPage","getUserVideos","newProps","LoginPage","onChange","onLogin","creditials","password","userAuthentication","nextProps","setItem","decoded","jwt_decode","initialState","booleanActionPayload","combineReducers","action","middleware","thunk","store","createStore","rootReducer","compose","applyMiddleware","EmbedVideo","Moderation","PageNotFound","Loader","UploadVideoContainer","submitForm","videoDetails","videoFile","posterFile","uploadVideoDetails","history","showLoader","onSelectFile","files","encType","htmlFor","accept","formData","FormData","append","ROLES","ADMINISTRATOR","MODERATOR","CREATOR","EditVideoPage","editVideo","roles","titleIsEdited","descriptionIsEdited","newState","jwtToken","currentType","Date","now","exp","App","exact","component","VideoPage","UploadVideoPage","from","to","Boolean","hostname","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","console"],"mappings":"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","file":"static/js/main.f0b79436.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst SearchForm = (props) => {\r\n  return (\r\n    <form className=\"form-inline my-2 my-lg-0\" onSubmit={props.searchingMethod}>\r\n      <input\r\n        className=\"form-control mr-sm-2\"\r\n        type=\"text\"\r\n        placeholder=\"Поиск\"\r\n        name=\"mask\"\r\n      />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default SearchForm;\r\n","import axios from \"axios\"\r\n\r\nconst setJWTToken = token => {\r\n    if (token) {\r\n        axios.defaults.headers.common[\"Authorization\"] = token\r\n    } else {\r\n        delete axios.defaults.headers.common[\"Authorization\"]\r\n    }\r\n}\r\n\r\nexport default setJWTToken;","import { GET_ERRORS, SET_CURRENT_USER } from \"./types\";\r\nimport axios from \"axios\";\r\nimport setJWTToken from \"../securityUtils/setJWTToken\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\n//axios.defaults.baseURL = \"http://p-lmplay-as01:8080/lmplay/api/\";\r\n\r\n//axios.defaults.baseURL = \"http://localhost:8080/lmplay/api\";\r\n\r\nexport const userAuthentication = (creditials) => async (dispatch) => {\r\n  try {\r\n    const params = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n    const data = {\r\n      username: creditials.username,\r\n      password: creditials.password,\r\n    };\r\n    const res = await axios.post(\"/user/login\", data, params);\r\n\r\n    const { token } = res.data;\r\n    localStorage.setItem(\"jwtToken\", token);\r\n\r\n    setJWTToken(token);\r\n\r\n    const decoded = jwt_decode(token);\r\n\r\n    dispatch({\r\n      type: SET_CURRENT_USER,\r\n      payload: decoded,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GET_ERRORS,\r\n      payload: err.response.data,\r\n    });\r\n  }\r\n};\r\n\r\nexport const userLogout = () => (dispatch) => {\r\n  localStorage.removeItem(\"jwtToken\");\r\n  setJWTToken(false);\r\n  dispatch({\r\n    type: SET_CURRENT_USER,\r\n    payload: {},\r\n  });\r\n};\r\n","export const GET_ERRORS = \"GET_ERRORS\";\r\nexport const GET_VIDEOS = \"GET_VIDEOS\";\r\nexport const GET_SELECTED_VIDEO = \"GET_SELECTED_VIDEO\";\r\nexport const SET_CURRENT_USER = \"SET_CURRENT_USER\";\r\nexport const GET_RECOMMENDATIONS = \"GET_RECOMMENDATIONS\";\r\n","import React from \"react\";\r\nimport SearchForm from \"./SearchForm\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { userLogout } from \"../../actions/userActions\";\r\nimport classnames from \"classnames\";\r\n\r\nconst pages = [\r\n  // title, uri, is public?, searchingField\r\n  [\"Главная\", \"/\", 0, true], // 0 - available to all users, 1 - for creater or highter, 2 - for moderators or highter, 3 - for admins\r\n  [\"Мои видео\", \"/user-videos\", 1, false],\r\n  [\"Загрузить\", \"/uploading\", 1, false],\r\n  [\"Модерация\", \"/moderation\", 2, true],\r\n];\r\n\r\nclass Header extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      searchEnabled: false,\r\n    };\r\n    this.menu = React.createRef();\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    const path = window.location.pathname;\r\n    pages.forEach((page) => {\r\n      if (page[1] === path && page[3])\r\n        this.setState({\r\n          searchEnabled: true,\r\n        });\r\n    });\r\n  };\r\n\r\n  menuButtonClick = () => {\r\n    const menu = this.menu.current;\r\n    if (menu.style.display === \"\" || menu.style.display === \"none\") {\r\n      menu.style.display = \"block\";\r\n    } else if (menu.style.display === \"block\") {\r\n      menu.style.display = \"\";\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { validToken, user } = this.props.security;\r\n    const curPath = window.location.pathname;\r\n    var accessLevel = 0;\r\n\r\n    switch (user.role) {\r\n      case \"CREATOR\":\r\n        accessLevel = 1;\r\n        break;\r\n      case \"MODERATOR\":\r\n        accessLevel = 2;\r\n        break;\r\n      case \"ADMINISTRATOR\":\r\n        accessLevel = 3;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    const userIsAuthenticated = (\r\n      <div\r\n        className=\"collapse navbar-collapse\"\r\n        id=\"navbarSupportedContent\"\r\n        ref={this.menu}\r\n      >\r\n        <ul className=\"navbar-nav mr-auto\">\r\n          {pages.map(\r\n            (page) =>\r\n              page[2] <= accessLevel && (\r\n                <li key={page[0]} className=\"nav-item\">\r\n                  {\r\n                    <a\r\n                      className={classnames(\"nav-link active\", {\r\n                        \"nav-link text-muted font-weight-lighter\":\r\n                          page[1] !== curPath,\r\n                      })}\r\n                      href={page[1]}\r\n                    >\r\n                      {page[0]}\r\n                    </a>\r\n                  }\r\n                </li>\r\n              )\r\n          )}\r\n        </ul>\r\n        {this.state.searchEnabled && (\r\n          <SearchForm searchingMethod={this.props.searchingMethod} />\r\n        )}\r\n      </div>\r\n    );\r\n\r\n    const userNotAuthenticated = (\r\n      <div\r\n        className=\"collapse navbar-collapse\"\r\n        id=\"navbarSupportedContent\"\r\n        ref={this.menu}\r\n      >\r\n        <ul className=\"navbar-nav mr-auto\">\r\n          {pages.map(\r\n            (page) =>\r\n              page[2] === 0 && (\r\n                <li key={page[0]} className=\"nav-item\">\r\n                  {\r\n                    <a\r\n                      className={classnames(\"nav-link active\", {\r\n                        \"nav-link text-muted font-weight-lighter\":\r\n                          page[1] !== curPath,\r\n                      })}\r\n                      href={page[1]}\r\n                    >\r\n                      {page[0]}\r\n                    </a>\r\n                  }\r\n                </li>\r\n              )\r\n          )}\r\n        </ul>\r\n        {this.state.searchEnabled && (\r\n          <SearchForm searchingMethod={this.props.searchingMethod} />\r\n        )}\r\n      </div>\r\n    );\r\n\r\n    let headerLinks;\r\n\r\n    if (validToken && user) {\r\n      headerLinks = userIsAuthenticated;\r\n    } else {\r\n      headerLinks = userNotAuthenticated;\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <nav className=\"navbar navbar-expand-lg navbar-light header-bg-color\">\r\n          <button\r\n            className=\"navbar-toggler\"\r\n            type=\"button\"\r\n            data-toggle=\"collapse\"\r\n            data-target=\"#navbarSupportedContent\"\r\n            aria-controls=\"navbarSupportedContent\"\r\n            aria-expanded=\"false\"\r\n            aria-label=\"Toggle navigation\"\r\n            onClick={this.menuButtonClick}\r\n          >\r\n            <span className=\"navbar-toggler-icon\"></span>\r\n          </button>\r\n          <a className=\"navbar-brand\" href=\"/\">\r\n            LMPlay\r\n          </a>\r\n\r\n          {headerLinks}\r\n          {validToken ? (\r\n            <div className=\"navbar-expand\">\r\n              <div className=\"inline-block float-left text-muted text-center ml-3 mr-3\">\r\n                <div className=\"small\">{user.fullName}</div>\r\n                <div className=\"small m-0 p-0\">{user.role}</div>\r\n              </div>\r\n              <div className=\"inline-block float-right\">\r\n                <a\r\n                  className=\"nav-link text-muted font-weight-lighter\"\r\n                  href=\"/\"\r\n                  onClick={() => this.props.userLogout()}\r\n                >\r\n                  Выйти\r\n                </a>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"navbar-nav\">\r\n              <a\r\n                className={classnames(\"nav-link active\", {\r\n                  \"nav-link text-muted font-weight-lighter\":\r\n                    \"/login\" !== curPath,\r\n                })}\r\n                href=\"/login\"\r\n              >\r\n                Войти\r\n              </a>\r\n            </div>\r\n          )}\r\n        </nav>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nHeader.propTypes = {\r\n  userLogout: PropTypes.func.isRequired,\r\n  security: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    security: state.security,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { userLogout })(Header);\r\n","import {\r\n  GET_ERRORS,\r\n  GET_VIDEOS,\r\n  GET_SELECTED_VIDEO,\r\n  GET_RECOMMENDATIONS,\r\n} from \"./types\";\r\nimport axios from \"axios\";\r\n\r\naxios.defaults.baseURL = \"http://p-lmplay-as01:8080/lmplay/api\";\r\n\r\n//axios.defaults.baseURL = \"http://localhost:8080/lmplay/api\";\r\n\r\nexport const uploadVideoDetails = (videoDetails, history) => async (\r\n  dispatch\r\n) => {\r\n  try {\r\n    const formData = new FormData();\r\n    formData.append(\"title\", videoDetails.title);\r\n    formData.append(\"description\", videoDetails.description);\r\n    formData.append(\"videoFile\", videoDetails.videoFile);\r\n    formData.append(\"posterFile\", videoDetails.posterFile);\r\n    const params = {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    };\r\n    await axios.post(\"/video/upload\", formData, params);\r\n    window.location.href = \"/user-videos\";\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GET_ERRORS,\r\n      payload: err.response.data,\r\n    });\r\n  }\r\n};\r\n\r\nexport const getVideos = (searchMask, availability) => async (dispatch) => {\r\n  const res = await axios.get(\r\n    `/video/videos?title=${searchMask}&available=${availability}`\r\n  );\r\n  dispatch({\r\n    type: GET_VIDEOS,\r\n    payload: res.data,\r\n  });\r\n};\r\n\r\nexport const getVideo = (videoId) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(`/video/${videoId}`);\r\n    if (res.data)\r\n      dispatch({\r\n        type: GET_SELECTED_VIDEO,\r\n        payload: res.data,\r\n      });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GET_ERRORS,\r\n      payload: err.response.data,\r\n    });\r\n  }\r\n};\r\n\r\nexport const getUserVideos = () => async (dispatch) => {\r\n  const res = await axios.get(\"/user/videos\");\r\n\r\n  dispatch({\r\n    type: GET_VIDEOS,\r\n    payload: res.data,\r\n  });\r\n};\r\n\r\nexport const setAvailability = (videoId, availability) => async (dispatch) => {\r\n  const res = await axios.post(\r\n    `/video/availability?id=${videoId}&available=${availability}`\r\n  );\r\n  dispatch({\r\n    type: GET_SELECTED_VIDEO,\r\n    payload: res.data,\r\n  });\r\n};\r\n\r\nexport const getPosterSrc = (posterId) => {\r\n  if (posterId) {\r\n    return axios.defaults.baseURL + `/poster/${posterId}`;\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const getVideoSrc = (resolution, name) => {\r\n  if (resolution && name) {\r\n    return axios.defaults.baseURL + `/video/stream/${resolution}/${name}`;\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const getRecommendations = (videoId) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(\r\n      axios.defaults.baseURL + `/video/recommendations/${videoId}`\r\n    );\r\n    if (res.data) {\r\n      dispatch({\r\n        type: GET_RECOMMENDATIONS,\r\n        payload: res.data,\r\n      });\r\n    }\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GET_ERRORS,\r\n      payload: err.response.data,\r\n    });\r\n  }\r\n};\r\n\r\nexport const editVideo = (videoId, title, description) => async (dispatch) => {\r\n  try {\r\n    const data = {\r\n      id: videoId,\r\n      title: title,\r\n      description: description,\r\n    };\r\n\r\n    const params = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    await axios.post(\"/video/edit\", data, params);\r\n\r\n    window.location.href = `/video/${videoId}`;\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GET_ERRORS,\r\n      payload: err.response.data,\r\n    });\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { getPosterSrc } from \"../../actions/videoActions\";\r\n\r\nclass Poster extends React.Component {\r\n  state = {\r\n    width: 0,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.setState({\r\n      width: this.posterContainer.clientWidth,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const posterId = this.props.posterId;\r\n    const api_url = getPosterSrc(posterId);\r\n    return (\r\n      <div\r\n        ref={(cont) => (this.posterContainer = cont)}\r\n        style={{\r\n          height: this.state.width * 0.7,\r\n        }}\r\n      >\r\n        <img className=\"poster\" src={api_url} alt={this.props.alt} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Poster;\r\n","import React from \"react\";\r\nimport Poster from \"./Poster\";\r\n\r\nconst VideoPreview = (props) => {\r\n  const videoUri = \"/video/\" + props.video.id;\r\n\r\n  return (\r\n    <a\r\n      className=\"nav-link text-muted\"\r\n      href={videoUri}\r\n      poster={props.video.poster.id}\r\n    >\r\n      <div className=\"videoPreview card-body\">\r\n        {!props.video.available && (\r\n          <div className=\"badge badge-pill badge-warning position-absolute font-weight-light mt-1 ml-1\">\r\n            не опубликовано\r\n          </div>\r\n        )}\r\n        <div>\r\n          <Poster posterId={props.video.poster.id} alt={props.video.title} />\r\n        </div>\r\n        <p className=\"text-center font-weight-bold\">{props.video.title}</p>\r\n        <small className=\"muted\">\r\n          <div>\r\n            Автор:{\" \"}\r\n            {props.video.author\r\n              ? props.video.author.fullName\r\n                ? props.video.author.fullName\r\n                : \"Неизвестен\"\r\n              : \"Неизвестен\"}\r\n          </div>\r\n          <div>Загружен: {props.video.createdAt}</div>\r\n          <div>Просмотров: {props.video.views}</div>\r\n        </small>\r\n      </div>\r\n    </a>\r\n  );\r\n};\r\n\r\nexport default VideoPreview;\r\n","import React from \"react\";\r\nimport Header from \"../Elements/Header\";\r\nimport VideoPreview from \"../Elements/VideoPreview\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { getVideos } from \"../../actions/videoActions\";\r\n\r\nclass MainPage extends React.Component {\r\n  searchingVideo = (e) => {\r\n    e.preventDefault();\r\n    var mask = e.target.elements.mask.value;\r\n    this.props.getVideos(mask, true);\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.getVideos(\"\", true);\r\n  }\r\n\r\n  render() {\r\n    const { videos } = this.props.videos;\r\n    return (\r\n      <div>\r\n        <Header searchingMethod={this.searchingVideo} />\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row pt-3\">\r\n            {videos.map((video) => {\r\n              return (\r\n                <div\r\n                  key={video.id}\r\n                  className=\"col-sm-12 col-md-4 col-lg-3 videoPreview\"\r\n                >\r\n                  <VideoPreview video={video} />\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMainPage.propTypes = {\r\n  getVideos: PropTypes.func.isRequired,\r\n  videos: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  videos: state.videos,\r\n});\r\n\r\nexport default connect(mapStateToProps, { getVideos })(MainPage);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport Plyr from \"plyr\";\r\nimport { getPosterSrc, getVideoSrc } from \"../../actions/videoActions\";\r\n\r\nclass Video extends React.Component {\r\n  createPlayer() {\r\n    const video = this.props.video;\r\n    let posterSrc = getPosterSrc(video.poster.id);\r\n    let streams = [];\r\n    video.videos.forEach((video) => {\r\n      let videoSrc = getVideoSrc(video.resolution, video.name);\r\n      let stream = {\r\n        src: videoSrc,\r\n        type: video.mimeType,\r\n        size: video.resolution,\r\n      };\r\n      streams.push(stream);\r\n    });\r\n\r\n    let player = new Plyr(document.getElementById(\"player\"), {\r\n      title: video.title,\r\n      controls: [\r\n        \"play-large\",\r\n        \"play\",\r\n        \"progress\",\r\n        \"current-time\",\r\n        \"mute\",\r\n        \"volume\",\r\n        \"settings\",\r\n        \"fullscreen\",\r\n      ],\r\n      settings: [\"quality\", \"speed\"],\r\n      autoplay: this.props.autoplay,\r\n      autopause: true,\r\n      clickToPlay: true,\r\n      hideControls: true,\r\n      fullscreen: {\r\n        enabled: true,\r\n      },\r\n    });\r\n\r\n    player.source = {\r\n      type: \"video\",\r\n      title: video.title,\r\n      sources: streams,\r\n      poster: posterSrc,\r\n    };\r\n\r\n    player.quality = {\r\n      default: \"480\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.createPlayer();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <video id=\"player\" preload=\"auto\" controls width=\"auto\" height=\"100%\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nVideo.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Video);\r\n","import React from \"react\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst IframePopup = (props) => {\r\n  const iframeText =\r\n    \"<iframe \" +\r\n    \"title='\" +\r\n    props.video.title +\r\n    \"' \" +\r\n    `src='${window.location.origin}/embed/` +\r\n    props.video.id +\r\n    \"' \" +\r\n    \"frameBorder='0' \" +\r\n    \"height= '300' \" +\r\n    \"width='\" +\r\n    300 * 1.77 +\r\n    \"' allowfullscreen />\";\r\n  return (\r\n    <Modal show={props.show} animation={false} onHide={props.hide}>\r\n      <Modal.Body>\r\n        <p>Скопируйте текст в необходимую страницу</p>\r\n        <textarea\r\n          className=\"form-control w-100\"\r\n          defaultValue={iframeText}\r\n          rows=\"3\"\r\n          style={{ fontSize: \"0.8em\" }}\r\n        />\r\n      </Modal.Body>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nIframePopup.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(IframePopup);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { setAvailability } from \"../../../actions/videoActions\";\r\n\r\nclass Availability extends React.Component {\r\n  updateAvailability = (availability) => {\r\n    this.props.setAvailability(this.props.video.id, availability);\r\n  };\r\n\r\n  render() {\r\n    switch (this.props.user.role) {\r\n      case \"ADMINISTRATOR\":\r\n      case \"MODERATOR\":\r\n        if (this.props.video.available) {\r\n          return (\r\n            <div onClick={() => this.updateAvailability(false)}>\r\n              снять с публикации\r\n            </div>\r\n          );\r\n        } else {\r\n          return (\r\n            <div onClick={() => this.updateAvailability(true)}>\r\n              опубликовать\r\n            </div>\r\n          );\r\n        }\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n}\r\n\r\nAvailability.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n  setAvailability: PropTypes.func.isRequired,\r\n  user: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n    user: state.security.user,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { setAvailability })(Availability);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Edit extends React.Component {\r\n  redirectToEditPage() {\r\n    window.location.href = `/edit/${this.props.video.id}`;\r\n  }\r\n\r\n  render() {\r\n    return <div onClick={() => this.redirectToEditPage()}>редактировать</div>;\r\n  }\r\n}\r\n\r\nEdit.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Edit);\r\n","import React from \"react\";\r\nimport Dropdown from \"react-bootstrap/Dropdown\";\r\nimport IframePopup from \"./VideoMenu/IframePopup\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport Availability from \"../Elements/VideoMenu/Availability\";\r\nimport Edit from \"./VideoMenu/Edit\";\r\n\r\nclass VideoActionsMenu extends React.Component {\r\n  state = {\r\n    showIframePopup: false,\r\n  };\r\n\r\n  showIframePopup = () => {\r\n    this.setState({\r\n      showIframePopup: true,\r\n    });\r\n  };\r\n\r\n  hideIframePopup = () => {\r\n    this.setState({\r\n      showIframePopup: false,\r\n    });\r\n  };\r\n\r\n  getMenuItems() {\r\n    var menuItems = [];\r\n    switch (this.props.user.role) {\r\n      case \"ADMINISTRATOR\":\r\n      case \"MODERATOR\":\r\n        menuItems.push(\r\n          <Dropdown.Item onClick={this.showIframePopup}>\r\n            встроить видео\r\n          </Dropdown.Item>\r\n        );\r\n        menuItems.push(\r\n          <Dropdown.Item>\r\n            <Availability />\r\n          </Dropdown.Item>\r\n        );\r\n        menuItems.push(\r\n          <Dropdown.Item>\r\n            <Edit />\r\n          </Dropdown.Item>\r\n        );\r\n        break;\r\n\r\n      case \"CREATOR\":\r\n        {\r\n          menuItems.push(\r\n            <Dropdown.Item onClick={this.showIframePopup}>\r\n              встроить видео\r\n            </Dropdown.Item>\r\n          );\r\n          const videoAuthor = this.props.video.author\r\n            ? this.props.video.author.username\r\n            : \"\";\r\n          const username = this.props.user.username;\r\n          if (username !== undefined && username === videoAuthor) {\r\n            menuItems.push(\r\n              <Dropdown.Item>\r\n                <Edit />\r\n              </Dropdown.Item>\r\n            );\r\n          }\r\n        }\r\n        break;\r\n      default:\r\n        menuItems.push(\r\n          <Dropdown.Item onClick={this.showIframePopup}>\r\n            встроить видео\r\n          </Dropdown.Item>\r\n        );\r\n        break;\r\n    }\r\n    return menuItems;\r\n  }\r\n\r\n  render() {\r\n    const menuItems = this.getMenuItems();\r\n\r\n    return (\r\n      <div>\r\n        <IframePopup\r\n          show={this.state.showIframePopup}\r\n          hide={this.hideIframePopup}\r\n        />\r\n\r\n        <Dropdown>\r\n          <Dropdown.Toggle\r\n            className=\"btn-sm mt-1 float-right btn-outline-light\"\r\n            style={{ fontSize: \"0.8em\", backgroundColor: \"#50c779\" }}\r\n          >\r\n            Меню\r\n          </Dropdown.Toggle>\r\n          <Dropdown.Menu style={{ fontSize: \"0.8em\" }}>\r\n            {menuItems.map((menuItem, index, array) => (\r\n              <div key={index}>{menuItem}</div>\r\n            ))}\r\n          </Dropdown.Menu>\r\n        </Dropdown>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nVideoActionsMenu.propTypes = {\r\n  user: PropTypes.object.isRequired,\r\n  video: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.security.user,\r\n    video: state.videos.video,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(VideoActionsMenu);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport Video from \"../Elements/Video\";\r\nimport VideoActionsMenu from \"../Elements/VideoActionsMenu\";\r\n\r\nclass VideoContainer extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"col-sm-12 pt-3\">\r\n        <div>\r\n          <Video />\r\n        </div>\r\n\r\n        {!this.props.video.available && (\r\n          <div className=\"alert alert-warning\">\r\n            В настоящее время видео снято с пуликации.\r\n          </div>\r\n        )}\r\n\r\n        <VideoActionsMenu />\r\n\r\n        <div>\r\n          <h4>{this.props.video.title}</h4>\r\n        </div>\r\n        <small className=\"text-muted\">\r\n          <div className=\"d-inline\">\r\n            Автор:{\" \"}\r\n            {this.props.video.author\r\n              ? this.props.video.author.fullName\r\n                ? this.props.video.author.fullName\r\n                : \"Неизвестен\"\r\n              : \"Неизвестен\"}\r\n          </div>\r\n          <div className=\"d-inline float-right\">\r\n            Загружено: {this.props.video.createdAt}\r\n          </div>\r\n\r\n          <div>Просмотров: {this.props.video.views}</div>\r\n        </small>\r\n        <hr />\r\n        <div className=\"\">{this.props.video.description}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nVideoContainer.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(VideoContainer);\r\n","import React from \"react\";\r\nimport VideoPreview from \"../Elements/VideoPreview\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { getRecommendations } from \"../../actions/videoActions\";\r\n\r\nclass Recomendations extends React.Component {\r\n  render() {\r\n    const newVideo = this.props.video;\r\n    if (newVideo !== this.video) {\r\n      this.video = newVideo;\r\n      if (newVideo.id) {\r\n        this.props.getRecommendations(newVideo.id);\r\n      } else {\r\n        this.props.getRecommendations(-1);\r\n      }\r\n    }\r\n    return (\r\n      <div>\r\n        <p className=\"breadcrumb breadcrumb-item active mt-3\">Рекомендации</p>\r\n        {this.props.recommendations.map((recommendation) => (\r\n          <div key={recommendation.id} className=\"videoPreview\">\r\n            <VideoPreview video={recommendation} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nRecomendations.propTypes = {\r\n  getRecommendations: PropTypes.func.isRequired,\r\n  errors: PropTypes.object.isRequired,\r\n  video: PropTypes.object.isRequired,\r\n  recommendations: PropTypes.array.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n    errors: state.errors,\r\n    recommendations: state.videos.recommendations,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getRecommendations })(Recomendations);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass NoVideoContainer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.cont = React.createRef();\r\n\r\n    this.state = {\r\n      clientWidth: 0,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      clientWidth: this.cont.current.clientWidth,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <div\r\n          ref={this.cont}\r\n          className=\"row text-secondary\"\r\n          style={{\r\n            height: this.state.clientWidth * 0.56,\r\n          }}\r\n        >\r\n          <div className=\"my-auto col-12 text-center\">\r\n            <p className=\"h4\">Упс...</p>\r\n            {this.props.error.message}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nNoVideoContainer.propTypes = {\r\n  error: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    error: state.errors,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(NoVideoContainer);\r\n","import React from \"react\";\r\nimport VideoContainer from \"../containers/VideoContainer\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { getVideo } from \"../../actions/videoActions\";\r\nimport Header from \"../Elements/Header\";\r\nimport Recomendations from \"../Elements/Recomendations\";\r\nimport NoVideoContainer from \"../containers/NoVideoContainer\";\r\n\r\nclass TestPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const videoId = this.props.match.params.videoId;\r\n\r\n    if (videoId !== undefined) {\r\n      this.props.getVideo(videoId);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const errorMessage = this.props.error.message;\r\n    return (\r\n      <div>\r\n        <Header />\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-12 col-lg-8\">\r\n              {errorMessage ? (\r\n                <NoVideoContainer />\r\n              ) : (\r\n                this.props.video.id && <VideoContainer />\r\n              )}\r\n            </div>\r\n            <div className=\"col-12 col-lg-4\">\r\n              <Recomendations />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTestPage.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n  getVideo: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n    error: state.errors,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getVideo })(TestPage);\r\n","import React from \"react\";\r\nimport Header from \"../Elements/Header\";\r\nimport { connect } from \"react-redux\";\r\nimport { getUserVideos } from \"../../actions/videoActions\";\r\nimport PropTypes from \"prop-types\";\r\nimport VideoPreview from \"../Elements/VideoPreview\";\r\n\r\nclass UserVideoPage extends React.Component {\r\n  state = {\r\n    videos: [],\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.getUserVideos();\r\n  }\r\n\r\n  componentDidUpdate(newProps) {\r\n    if (newProps.videos && newProps.videos !== this.state.videos) {\r\n      this.setState({\r\n        videos: newProps.videos,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Header searchingMethod={this.searchingVideo} />\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row pt-3\">\r\n            {this.state.videos\r\n              ? this.state.videos.map((video) => {\r\n                  return (\r\n                    <div\r\n                      key={video.id}\r\n                      className=\"col-sm-12 col-md-4 col-lg-3 videoPreview\"\r\n                    >\r\n                      <VideoPreview video={video} />\r\n                    </div>\r\n                  );\r\n                })\r\n              : {}}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nUserVideoPage.propTypes = {\r\n  videos: PropTypes.array.isRequired,\r\n  getUserVideos: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    videos: state.videos.videos,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getUserVideos })(UserVideoPage);\r\n","import React from \"react\";\r\nimport Header from \"../Elements/Header\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { userAuthentication } from \"../../actions/userActions\";\r\nimport classnames from \"classnames\";\r\n\r\nclass LoginPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      password: \"\",\r\n      errors: {},\r\n    };\r\n    if (this.props.security.validToken) {\r\n      window.location.href = \"/\";\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.errors) {\r\n      this.setState({\r\n        errors: nextProps.errors,\r\n      });\r\n    }\r\n  }\r\n\r\n  onChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  onLogin = (e) => {\r\n    e.preventDefault();\r\n    const creditials = {\r\n      username: this.state.username,\r\n      password: this.state.password,\r\n    };\r\n    this.props.userAuthentication(creditials);\r\n  };\r\n\r\n  render() {\r\n    const errors = this.state.errors;\r\n    if (this.props.security.validToken) {\r\n      window.location.href = \"/\";\r\n    } else\r\n      return (\r\n        <div>\r\n          <Header />\r\n          <div className=\"container\">\r\n            <div className=\"row justify-content-center\">\r\n              <div className=\"col-12 col-md-4 position-absolute login-form \">\r\n                <form onSubmit={this.onLogin}>\r\n                  <div className=\"form-group\">\r\n                    <input\r\n                      type=\"text\"\r\n                      className={classnames(\"form-control\", {\r\n                        \"is-invalid\": errors.username,\r\n                      })}\r\n                      placeholder=\"ЛДАП\"\r\n                      value={this.state.username}\r\n                      name=\"username\"\r\n                      onChange={this.onChange}\r\n                    />\r\n                    {errors.username && (\r\n                      <div className=\"invalid-feedback\">{errors.username}</div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <input\r\n                      type=\"password\"\r\n                      className={classnames(\"form-control\", {\r\n                        \"is-invalid\": errors.password,\r\n                      })}\r\n                      name=\"password\"\r\n                      value={this.state.password}\r\n                      onChange={this.onChange}\r\n                      placeholder=\"Пароль\"\r\n                    />\r\n                    {errors.password && (\r\n                      <div className=\"invalid-feedback\">{errors.password}</div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"form-group text-center\">\r\n                    <button\r\n                      className=\"btn btn-success btn-primary btn-lg\"\r\n                      type=\"submit\"\r\n                    >\r\n                      Войти\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n  }\r\n}\r\n\r\nLoginPage.propTypes = {\r\n  userAuthentication: PropTypes.func.isRequired,\r\n  errors: PropTypes.object.isRequired,\r\n  security: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  security: state.security,\r\n  errors: state.errors,\r\n});\r\n\r\nexport default connect(mapStateToProps, { userAuthentication })(LoginPage);\r\n","import {GET_ERRORS} from \"../actions/types\"\r\n\r\n const initialState = {};\r\n\r\n export default function(state=initialState, action){\r\n     switch (action.type){\r\n        case GET_ERRORS:\r\n            return action.payload;\r\n        default:\r\n            return state;\r\n     }\r\n }","import {\r\n  GET_VIDEOS,\r\n  GET_SELECTED_VIDEO,\r\n  GET_RECOMMENDATIONS,\r\n} from \"../actions/types\";\r\n\r\nconst initialState = {\r\n  videos: [],\r\n  video: {},\r\n  recommendations: [],\r\n};\r\n\r\nexport default function (state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_VIDEOS:\r\n      return {\r\n        ...state,\r\n        videos: action.payload,\r\n      };\r\n    case GET_SELECTED_VIDEO:\r\n      return {\r\n        ...state,\r\n        video: action.payload,\r\n      };\r\n    case GET_RECOMMENDATIONS:\r\n      return {\r\n        ...state,\r\n        recommendations: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { SET_CURRENT_USER } from \"../actions/types\";\r\n\r\nconst initialState ={\r\n    user: {},\r\n    validToken: false\r\n}\r\n\r\nconst booleanActionPayload = (payload) =>{\r\n    if (payload){\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport default function (state = initialState, action){\r\n    switch (action.type) {\r\n        case SET_CURRENT_USER: \r\n            return {\r\n                ...state,\r\n                validToken: booleanActionPayload(action.payload),\r\n                user: action.payload\r\n            }           \r\n                \r\n        default:\r\n            return state;\r\n    }\r\n} ","import {combineReducers} from \"redux\"\r\nimport errorReducer from \"./errorReducer\"\r\nimport videoReducer from \"./videoReducer\"\r\nimport userReducer from \"./userReducer\"\r\n\r\nexport default combineReducers({\r\n    errors: errorReducer,\r\n    videos: videoReducer,\r\n    security: userReducer\r\n})","import { createStore, compose, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport rootReducer from \"./reducers/rootReducer\";\r\n\r\nconst initialState = {};\r\nconst middleware = [thunk];\r\n\r\nlet store = {};\r\n\r\n// if (window.navigator.userAgent.includes(\"Chrome\")) {\r\n//   store = createStore(\r\n//     rootReducer,\r\n//     initialState,\r\n//     compose(\r\n//       applyMiddleware(...middleware),\r\n//       window.__REDUX_DEVTOOLS_EXTENSION__ &&\r\n//         window.__REDUX_DEVTOOLS_EXTENSION__()\r\n//     )\r\n//   );\r\n// } else {\r\n//   store = createStore(\r\n//     rootReducer,\r\n//     initialState,\r\n//     compose(applyMiddleware(...middleware))\r\n//   );\r\n// }\r\nstore = createStore(\r\n  rootReducer,\r\n  initialState,\r\n  compose(applyMiddleware(...middleware))\r\n);\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport Video from \"./Video\";\r\nimport NoVideoContainer from \"../containers/NoVideoContainer\";\r\nimport { getVideo } from \"../../actions/videoActions\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass EmbedVideo extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.props.getVideo(this.props.match.params.videoId);\r\n\r\n    this.state = {\r\n      video: undefined,\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(newProps) {\r\n    if (newProps.video && newProps.video !== this.state.video) {\r\n      this.setState({\r\n        video: newProps.video,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.props.error.message ? (\r\n          <NoVideoContainer />\r\n        ) : (\r\n          this.state.video && <Video />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nEmbedVideo.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n  getVideo: PropTypes.func.isRequired,\r\n  error: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n    error: state.errors,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getVideo })(EmbedVideo);\r\n","import React from \"react\";\r\nimport Header from \"../Elements/Header\";\r\nimport { connect } from \"react-redux\";\r\nimport { getVideos } from \"../../actions/videoActions\";\r\nimport PropTypes from \"prop-types\";\r\nimport VideoPreview from \"../Elements/VideoPreview\";\r\n\r\nclass Moderation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    if (!props.validToken) {\r\n      window.location.href = \"/login\";\r\n    }\r\n    switch (props.user.role) {\r\n      case \"ADMINISTRATOR\":\r\n      case \"MODERATOR\":\r\n        break;\r\n      default:\r\n        window.location.href = \"/\";\r\n    }\r\n  }\r\n\r\n  searchingVideo = (e) => {\r\n    e.preventDefault();\r\n    var mask = e.target.elements.mask.value;\r\n    this.props.getVideos(mask, false);\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.props.getVideos(\"\", false);\r\n  };\r\n\r\n  render() {\r\n    const { videos } = this.props.videos;\r\n    return (\r\n      <div>\r\n        <Header searchingMethod={this.searchingVideo} />\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row pt-3\">\r\n            {videos.map((video) => {\r\n              return (\r\n                <div\r\n                  key={video.id}\r\n                  className=\"col-sm-12 col-md-4 col-lg-3 videoPreview\"\r\n                >\r\n                  <VideoPreview video={video} />\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nModeration.propTypes = {\r\n  videos: PropTypes.object.isRequired,\r\n  getVideos: PropTypes.func.isRequired,\r\n  user: PropTypes.object.isRequired,\r\n  validToken: PropTypes.bool.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    videos: state.videos,\r\n    user: state.security.user,\r\n    validToken: state.security.validToken,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getVideos })(Moderation);\r\n","import React from \"react\";\r\nimport Header from \"../Elements/Header\";\r\n\r\nconst PageNotFound = () => {\r\n  return (\r\n    <div>\r\n      <Header />\r\n      <div className=\"mt-3 row text-secondary\">\r\n        <div className=\"my-auto col-12 text-center\">\r\n          <p className=\"h4\">Упс...</p>\r\n          Страница не найдена.\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageNotFound;\r\n","import React from \"react\";\r\n\r\nconst Loader = (props) => {\r\n  if (props.show) {\r\n    return (\r\n      <div className=\"loader\">\r\n        <div\r\n          className=\"spinner-border loader-spinner text-success\"\r\n          role=\"status\"\r\n        >\r\n          <span className=\"sr-only\">Loading...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  return \"\";\r\n};\r\n\r\nexport default Loader;\r\n","import React, { Component } from \"react\";\r\nimport { uploadVideoDetails } from \"../../actions/videoActions\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport classnames from \"classnames\";\r\nimport Loader from \"../Elements/Loader\";\r\n\r\nclass UploadVideoContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      title: \"\",\r\n      description: \"\",\r\n      videoFile: {},\r\n      posterFile: {},\r\n      showLoader: false,\r\n    };\r\n  }\r\n\r\n  submitForm = (e) => {\r\n    e.preventDefault();\r\n    const videoDetails = {\r\n      title: this.state.title,\r\n      description: this.state.description,\r\n      videoFile: this.state.videoFile,\r\n      posterFile: this.state.posterFile,\r\n    };\r\n    this.props.uploadVideoDetails(videoDetails, this.props.history);\r\n    this.setState({\r\n      showLoader: true,\r\n    });\r\n  };\r\n\r\n  shouldComponentUpdate() {\r\n    if (this.state.showLoader) {\r\n      this.setState({\r\n        showLoader: false,\r\n      });\r\n    }\r\n    return true;\r\n  }\r\n\r\n  onChange = (e) => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  };\r\n\r\n  onSelectFile = (e) => {\r\n    this.setState({ [e.target.name]: e.target.files[0] });\r\n  };\r\n\r\n  render() {\r\n    const errors = this.props.errors;\r\n    return (\r\n      <div className=\"container\">\r\n        <Loader show={this.state.showLoader} />\r\n        <p className=\"h4 text-center text-secondary\">Загрузка видео</p>\r\n        <form\r\n          className=\"text-left col-8 offset-2\"\r\n          onSubmit={this.submitForm}\r\n          encType=\"multipart/form-data\"\r\n        >\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"title\">Заголовок</label>\r\n            <input\r\n              type=\"text\"\r\n              className={classnames(\"form-control\", {\r\n                \"is-invalid\": errors.title,\r\n              })}\r\n              id=\"title\"\r\n              name=\"title\"\r\n              onChange={this.onChange}\r\n            />\r\n            {errors.title && (\r\n              <div className=\"invalid-feedback\">{errors.title}</div>\r\n            )}\r\n            <small className=\"text-muted\">\r\n              * Заголовок должен быть коротким, но точно отражающим суть видео\r\n            </small>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"description\">Описание к видео</label>\r\n            <textarea\r\n              className={classnames(\"form-control\", {\r\n                \"is-invalid\": errors.description,\r\n              })}\r\n              name=\"description\"\r\n              id=\"description\"\r\n              onChange={this.onChange}\r\n              rows=\"5\"\r\n            ></textarea>\r\n            {errors.description && (\r\n              <div className=\"invalid-feedback\">{errors.description}</div>\r\n            )}\r\n            <small className=\"text-muted\">\r\n              * Короткое, но ёмкое по смыслу описание загружаемого видео\r\n            </small>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"videoFile\">Видеофайл</label>\r\n            <input\r\n              type=\"file\"\r\n              name=\"videoFile\"\r\n              id=\"videoFile\"\r\n              className=\"form-control-file\"\r\n              onChange={this.onSelectFile}\r\n              accept=\"video/*\"\r\n            />\r\n            {errors.videoFile && (\r\n              <div className=\"invalid-feedback d-block\">{errors.videoFile}</div>\r\n            )}\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"posterFile\">Постер к видео</label>\r\n            <input\r\n              type=\"file\"\r\n              name=\"posterFile\"\r\n              id=\"posterFile\"\r\n              className=\"form-control-file\"\r\n              onChange={this.onSelectFile}\r\n              accept=\"image/*\"\r\n            />\r\n            {errors.posterFile && (\r\n              <div className=\"invalid-feedback d-block\">\r\n                {errors.posterFile}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn btn-primary btn-success btn-lg\"\r\n            >\r\n              Загрузить\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nUploadVideoContainer.propTypes = {\r\n  uploadVideoDetails: PropTypes.func.isRequired,\r\n  errors: PropTypes.object.isRequired,\r\n  user: PropTypes.object.isRequired,\r\n  validToken: PropTypes.bool.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  errors: state.errors,\r\n  user: state.security.user,\r\n  validToken: state.security.validToken,\r\n});\r\n\r\nexport default connect(mapStateToProps, { uploadVideoDetails })(\r\n  UploadVideoContainer\r\n);\r\n","import React from \"react\";\r\nimport UploadVideoContainer from \"../containers/UploadVideoContainer\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport Header from \"./../Elements/Header\";\r\n\r\nconst UploadVideoPage = (props) => {\r\n  if (props.validToken) {\r\n    return (\r\n      <div>\r\n        <Header />\r\n        <UploadVideoContainer />\r\n      </div>\r\n    );\r\n  } else window.location.href = \"/login\";\r\n};\r\n\r\nUploadVideoPage.propTypes = {\r\n  validToken: PropTypes.bool.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    validToken: state.security.validToken,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(UploadVideoPage);\r\n","import React from \"react\";\r\nimport VideoContainer from \"../containers/VideoContainer\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { getVideo } from \"../../actions/videoActions\";\r\n\r\nclass TestPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const videoId = this.props.match.params.videoId;\r\n\r\n    this.state = {\r\n      videoId: videoId,\r\n      video: {},\r\n    };\r\n\r\n    if (videoId !== undefined) {\r\n      this.props.getVideo(videoId);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"col-12 col-lg-8\">\r\n          <VideoContainer />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTestPage.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n  getVideo: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getVideo })(TestPage);\r\n","var ROLES = {\r\n  ADMINISTRATOR: \"ADMINISTRATOR\",\r\n  MODERATOR: \"MODERATOR\",\r\n  CREATOR: \"CREATOR\",\r\n};\r\n\r\nexport default ROLES;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { getVideo } from \"../../actions/videoActions\";\r\nimport roles from \"../../roles\";\r\nimport Header from \"../Elements/Header\";\r\nimport classnames from \"classnames\";\r\nimport { editVideo } from \"../../actions/videoActions\";\r\n\r\nclass EditVideoPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    if (!this.props.validToken) window.location.href = `/404`;\r\n    switch (this.props.user.role) {\r\n      case roles.ADMINISTRATOR:\r\n      case roles.MODERATOR:\r\n      case roles.CREATOR:\r\n        this.props.getVideo(this.props.match.params.videoId);\r\n        break;\r\n      default:\r\n        window.location.href = `/404`;\r\n        break;\r\n    }\r\n\r\n    this.state = {\r\n      title: \"\",\r\n      description: \"\",\r\n      titleIsEdited: false,\r\n      descriptionIsEdited: false,\r\n      errors: {},\r\n      video: undefined,\r\n    };\r\n\r\n    this.title = React.createRef();\r\n    this.description = React.createRef();\r\n  }\r\n\r\n  shouldComponentUpdate(newProps, newState) {\r\n    if (newProps.video && newProps.video !== newState.video) {\r\n      this.setState({\r\n        video: newProps.video,\r\n      });\r\n    }\r\n    return true;\r\n  }\r\n\r\n  componentDidUpdate(newProps) {\r\n    if (newProps.video.id) {\r\n      if (\r\n        newProps.user.role === roles.CREATOR &&\r\n        newProps.video.author.username !== newProps.user.username\r\n      ) {\r\n        window.location.href = \"/404\";\r\n      }\r\n\r\n      if (this.title.current.value === \"\" && !this.state.titleIsEdited) {\r\n        this.title.current.value = newProps.video.title;\r\n        this.setState({\r\n          title: this.title.current.value,\r\n          titleIsEdited: true,\r\n        });\r\n      }\r\n\r\n      if (\r\n        this.description.current.value === \"\" &&\r\n        !this.state.descriptionIsEdited\r\n      ) {\r\n        this.description.current.value = newProps.video.description;\r\n        this.setState({\r\n          description: this.description.current.value,\r\n          descriptionIsEdited: true,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  onChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  onSubmit = (e) => {\r\n    e.preventDefault();\r\n    const videoId = this.props.match.params.videoId;\r\n    const title = this.state.title;\r\n    const description = this.state.description;\r\n    this.props.editVideo(videoId, title, description);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Header />\r\n        <div className=\"row\">\r\n          {!this.props.errors.message ? (\r\n            this.props.video.id && (\r\n              <div className=\"my-auto col-8 offset-2\">\r\n                <form onSubmit={this.onSubmit}>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"title\">Заголовок</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      className={classnames(\"form-control\", {\r\n                        \"is-invalid\": this.props.errors.title,\r\n                      })}\r\n                      name=\"title\"\r\n                      ref={this.title}\r\n                      value={this.state.title}\r\n                      onChange={this.onChange}\r\n                    />\r\n                    {this.props.errors.title && (\r\n                      <div className=\"invalid-feedback\">\r\n                        {this.props.errors.title}\r\n                      </div>\r\n                    )}\r\n                    <small className=\"text-muted\">\r\n                      * Заголовок должен быть коротким, но точно отражающим суть\r\n                      видео\r\n                    </small>\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"description\">Описание к видео</label>\r\n                    <textarea\r\n                      className={classnames(\"form-control\", {\r\n                        \"is-invalid\": this.props.errors.description,\r\n                      })}\r\n                      ref={this.description}\r\n                      value={this.state.description}\r\n                      name=\"description\"\r\n                      rows=\"5\"\r\n                      onChange={this.onChange}\r\n                    ></textarea>\r\n                    {this.props.errors.description && (\r\n                      <div className=\"invalid-feedback\">\r\n                        {this.props.errors.description}\r\n                      </div>\r\n                    )}\r\n                    <small className=\"text-muted\">\r\n                      * Короткое, но ёмкое по смыслу описание видео\r\n                    </small>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <button\r\n                      type=\"submit\"\r\n                      className=\"btn btn-primary btn-success btn-lg\"\r\n                    >\r\n                      Сохранить\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            )\r\n          ) : (\r\n            <div className=\"col-12 text-center mt-4 text-secondary\">\r\n              {this.props.errors.message}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nEditVideoPage.propTypes = {\r\n  video: PropTypes.object.isRequired,\r\n  user: PropTypes.object.isRequired,\r\n  getVideo: PropTypes.func.isRequired,\r\n  editVideo: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    video: state.videos.video,\r\n    user: state.security.user,\r\n    errors: state.errors,\r\n    validToken: state.security.validToken,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getVideo, editVideo })(EditVideoPage);\r\n","import React from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  Redirect,\r\n  Switch,\r\n} from \"react-router-dom\";\r\nimport MainPage from \"./components/pages/MainPage\";\r\nimport VideoPage from \"./components/pages/VideoPage\";\r\nimport UserVideoPage from \"./components/pages/UserVideoPage\";\r\nimport LoginPage from \"./components/pages/LoginPage\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./store\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport setJWTToken from \"./securityUtils/setJWTToken\";\r\nimport { SET_CURRENT_USER } from \"./actions/types\";\r\nimport { userLogout } from \"./actions/userActions\";\r\nimport EmbedVideo from \"./components/Elements/EmbedVideo\";\r\nimport Moderation from \"./components/pages/Moderation\";\r\nimport PageNotFound from \"./components/pages/PageNotFound\";\r\nimport UploadVideoPage from \"./components/pages/UploadVideoPage\";\r\nimport TestPage from \"./components/pages/TestPage\";\r\nimport EditVideoPage from \"./components/pages/EditVideoPage\";\r\n\r\nconst jwtToken = localStorage.jwtToken;\r\n\r\nif (jwtToken) {\r\n  setJWTToken(jwtToken);\r\n  const decoded = jwt_decode(jwtToken);\r\n  store.dispatch({\r\n    type: SET_CURRENT_USER,\r\n    payload: decoded,\r\n  });\r\n\r\n  const currentType = Date.now() / 1000;\r\n  if (decoded.exp < currentType) {\r\n    store.dispatch(userLogout());\r\n    window.location.href = \"/\";\r\n  }\r\n}\r\n\r\nclass App extends React.Component {\r\n  render() {\r\n    return (\r\n      <Provider store={store}>\r\n        <div className=\"App\">\r\n          <Router>\r\n            <Switch>\r\n              <Route exact path=\"/\" component={MainPage} />\r\n              <Route exact path=\"/login\" component={LoginPage} />\r\n              <Route exact path=\"/video/:videoId\" component={VideoPage} />\r\n              <Route exact path=\"/embed/:videoId\" component={EmbedVideo} />\r\n              <Route exact path=\"/uploading\" component={UploadVideoPage} />\r\n              <Route exact path=\"/user-videos\" component={UserVideoPage} />\r\n              <Route exact path=\"/moderation\" component={Moderation} />\r\n              <Route exact path=\"/edit/:videoId\" component={EditVideoPage} />\r\n              <Route exact path=\"/test/:videoId\" component={TestPage} />\r\n              <Route exact path=\"/404\" component={PageNotFound} />\r\n              <Redirect from=\"*\" to=\"/404\" />\r\n            </Switch>\r\n          </Router>\r\n        </div>\r\n      </Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport \"./App.css\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}